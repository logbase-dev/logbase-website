(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{3883:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rss-feed",function(){return a(1700)}])},5692:function(e,t,a){"use strict";a.d(t,{j:function(){return s}});let s="Logbase"},1700:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(5893),n=a(7294),r=a(9008),l=a.n(r),i=a(1163),o=a(5692),c=a(837);function d(){let{user:e}=(0,c.a)(),t=(0,i.useRouter)(),[a,r]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[h,g]=(0,n.useState)(null),[m,p]=(0,n.useState)("all"),[y,f]=(0,n.useState)(!1),[x,j]=(0,n.useState)(1),[b,S]=(0,n.useState)(12),[v,w]=(0,n.useState)(0),[N,k]=(0,n.useState)({}),[C,D]=(0,n.useState)({}),[T,R]=(0,n.useState)({}),[E,_]=(0,n.useState)({}),[A,L]=(0,n.useState)(""),[P,O]=(0,n.useState)("all"),[K,U]=(0,n.useState)(0),[F,J]=(0,n.useState)({}),[I,z]=(0,n.useState)({}),[H,M]=(0,n.useState)(!1),[G,Z]=(0,n.useState)("card"),[W,X]=(0,n.useState)([]),[B,q]=(0,n.useState)(!1),[Q,V]=(0,n.useState)(""),[Y,$]=(0,n.useState)(null),[ee,et]=(0,n.useState)(""),[ea,es]=(0,n.useState)(null),[en,er]=(0,n.useState)(null),[el,ei]=(0,n.useState)([]),[eo,ec]=(0,n.useState)(!1),[ed,eu]=(0,n.useState)(!1),[eh,eg]=(0,n.useState)({name:"",url:"",type:"noncompetitor",status:"active"}),[em,ep]=(0,n.useState)(null),[ey,ef]=(0,n.useState)({name:"",url:"",type:"noncompetitor",status:"active"}),[ex,ej]=(0,n.useState)(null),[eb,eS]=(0,n.useState)(null),[ev,ew]=(0,n.useState)(void 0),[eN,ek]=(0,n.useState)(0),eC=()=>"/api/rss-migrate",eD=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;try{u(!0),g(null),console.log("\uD83D\uDD04 RSS 데이터 로딩 시작:",{blogName:e,page:t,pageSize:a,feedTypeParam:s,searchTextParam:n});let i=new URLSearchParams;e&&"all"!==e&&i.append("blogName",e),i.append("page",String(t)),i.append("pageSize",String(a)),s&&"all"!==s&&i.append("feedType",s),n&&i.append("searchText",n);let o=eC(),c="".concat(o,"?").concat(i);console.log("\uD83D\uDCE1 API 요청 URL:",c,"(환경:","production",")");let d=await fetch(c);if(console.log("\uD83D\uDCE1 API 응답 상태:",d.status,d.statusText),!d.ok)throw Error("HTTP error! status: ".concat(d.status));let h=await d.json();if(console.log("\uD83D\uDCE1 API 응답 데이터:",h),h.success){var l;r(h.data||[]),w(h.totalCount||0),ew(h.filteredCount),ek(h.totalPages||Math.ceil((h.filteredCount||h.totalCount)/a)),console.log("✅ RSS 데이터 로딩 완료:",{itemsCount:(null===(l=h.data)||void 0===l?void 0:l.length)||0,totalCount:h.totalCount||0,filteredCount:h.filteredCount})}else console.error("❌ API 응답 에러:",h.error),g(h.error||"데이터를 불러오는 중 오류가 발생했습니다.")}catch(e){console.error("❌ RSS 데이터 로딩 에러:",e),g("RSS 데이터를 불러오는 중 오류가 발생했습니다.")}finally{u(!1)}},eT=e=>{j(e),eD("all"===m?void 0:m,e,b,P,A)},eR=e=>{S(e),j(1),eD("all"===m?void 0:m,1,e,P,A)},eE=async e=>{var t;let s=null===(t=N[e])||void 0===t?void 0:t.trim();if(!s)return;let n=s.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(0===n.length)return;R(t=>({...t,[e]:!0}));let r=a.find(t=>t.guid===e),l=C[e]||(null==r?void 0:r.matchedKeywords)||[],i=Array.isArray(l)?l:[];console.log("\uD83D\uDD0D 기존 키워드 확인:",{guid:e,existing:l,existingArray:i,newKeywords:n});let o=Array.from(new Set([...i,...n]));try{console.log("\uD83D\uDD27 키워드 저장 시작:",{guid:e,matchedKeywords:o});let t=new AbortController,a=setTimeout(()=>t.abort(),3e4),s=await fetch("/api/rss-migrate/keywords",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({guid:e,matchedKeywords:o}),signal:t.signal});if(clearTimeout(a),console.log("\uD83D\uDCE1 키워드 저장 응답 상태:",s.status,s.statusText),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let n=await s.json();console.log("\uD83D\uDCE1 키워드 저장 응답:",n),n.success?(D(t=>({...t,[e]:o})),k(t=>({...t,[e]:""})),console.log("✅ 키워드 저장 성공:",e)):(console.error("❌ 키워드 저장 실패:",n.error),alert("키워드 저장 실패: "+n.error))}catch(e){console.error("❌ 키워드 저장 중 오류:",e),e instanceof Error&&"AbortError"===e.name?alert("키워드 저장 시간 초과 (30초). 다시 시도해주세요."):alert("키워드 저장 중 오류 발생: "+(e instanceof Error?e.message:"알 수 없는 오류"))}finally{R(t=>({...t,[e]:!1}))}},e_=async(e,t)=>{if(!window.confirm('키워드 "'.concat(t,'"을(를) 삭제하시겠습니까?')))return;let s=a.find(t=>t.guid===e),n=C[e]||(null==s?void 0:s.matchedKeywords)||[],r=Array.isArray(n)?n:[];console.log("\uD83D\uDD0D 키워드 삭제 - 기존 키워드 확인:",{guid:e,existing:n,existingArray:r,keyword:t});let l=r.filter(e=>e!==t);R(t=>({...t,[e]:!0}));try{console.log("\uD83D\uDD27 키워드 삭제 시작:",{guid:e,keyword:t,matchedKeywords:l});let a=new AbortController,s=setTimeout(()=>a.abort(),3e4),n=await fetch("/api/rss-migrate/keywords",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({guid:e,matchedKeywords:l}),signal:a.signal});if(clearTimeout(s),console.log("\uD83D\uDCE1 키워드 삭제 응답 상태:",n.status,n.statusText),!n.ok)throw Error("HTTP error! status: ".concat(n.status));let r=await n.json();console.log("\uD83D\uDCE1 키워드 삭제 응답:",r),r.success?(D(t=>({...t,[e]:l})),console.log("✅ 키워드 삭제 성공:",e,t)):(console.error("❌ 키워드 삭제 실패:",r.error),alert("키워드 삭제 실패: "+r.error))}catch(e){console.error("❌ 키워드 삭제 중 오류:",e),e instanceof Error&&"AbortError"===e.name?alert("키워드 삭제 시간 초과 (30초). 다시 시도해주세요."):alert("키워드 삭제 중 오류 발생: "+(e instanceof Error?e.message:"알 수 없는 오류"))}finally{R(t=>({...t,[e]:!1}))}},eA=async e=>{if(window.confirm("이 글을 삭제하시겠습니까?")){if(!e||"string"!=typeof e||!e.trim()){alert("유효하지 않은 글 ID입니다.");return}_(t=>({...t,[e]:!0}));try{console.log("\uD83D\uDDD1️ 글 삭제 요청:",{guid:e});let t=await fetch("/api/rss-migrate/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:e.trim()})});console.log("\uD83D\uDCE1 삭제 응답 상태:",t.status,t.statusText);let a=await t.json();console.log("\uD83D\uDCE1 삭제 응답 데이터:",a),a.success?(r(t=>t.filter(t=>t.guid!==e)),D(t=>{let a={...t};return delete a[e],a}),alert("글이 삭제되었습니다.")):(console.error("❌ 글 삭제 실패:",a),alert("글 삭제 실패: "+(a.message||a.error||"알 수 없는 오류")))}catch(e){console.error("❌ 글 삭제 중 오류:",e),alert("글 삭제 중 오류 발생: "+(e instanceof Error?e.message:"알 수 없는 오류"))}finally{_(t=>({...t,[e]:!1}))}}},eL=e=>{O(e),j(1),eD(m,1,b,e,A)};(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("search");e?(L(e),eD(m,1,b,P,e)):eD(m,1,b)},[]),Array.from(new Set(a.map(e=>e.blogName))).sort().filter(e=>{var t;let s=!A||e.toLowerCase().includes(A.toLowerCase());if("all"===P)return s;let n=(null===(t=a.find(t=>t.blogName===e))||void 0===t?void 0:t.feedType)===P;return s&&n});let eP=()=>{j(1),eD("all"===m?void 0:m,1,b,P,A)},eO=e=>{let t=new Date(e),a=t.toLocaleString("ko-KR",{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),s=t.toLocaleString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return"".concat(a," GMT / ").concat(s," KST")},eK=async()=>{try{q(!0);let e=await fetch("/api/keywords"),t=await e.json();t.success?X(t.keywords):es("키워드 목록을 불러올 수 없습니다.")}catch(e){es("키워드 목록을 불러오는 중 오류가 발생했습니다.")}finally{q(!1)}},eU=async()=>{if(!Q.trim()){es("키워드를 입력해주세요.");return}try{q(!0),es(null);let e=await fetch("/api/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:Q.trim()})}),t=await e.json();t.success?(X(t.keywords),V(""),er("키워드가 추가되었습니다."),setTimeout(()=>er(null),3e3)):es(t.error)}catch(e){es("키워드 추가 중 오류가 발생했습니다.")}finally{q(!1)}},eF=e=>{$(e),et(e)},eJ=async()=>{if(!Y||!ee.trim()){es("키워드를 입력해주세요.");return}try{q(!0),es(null);let e=await fetch("/api/keywords",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldKeyword:Y,newKeyword:ee.trim()})}),t=await e.json();t.success?(X(t.keywords),$(null),et(""),er("키워드가 수정되었습니다."),setTimeout(()=>er(null),3e3)):es(t.error)}catch(e){es("키워드 수정 중 오류가 발생했습니다.")}finally{q(!1)}},eI=async e=>{if(window.confirm('키워드 "'.concat(e,'"을(를) 삭제하시겠습니까?')))try{q(!0),es(null);let t=await fetch("/api/keywords",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:e})}),a=await t.json();a.success?(X(a.keywords),er("키워드가 삭제되었습니다."),setTimeout(()=>er(null),3e3)):es(a.error)}catch(e){es("키워드 삭제 중 오류가 발생했습니다.")}finally{q(!1)}};(0,n.useEffect)(()=>{H&&eK()},[H]);let ez=async()=>{ec(!0);try{let e=await fetch("/api/feeds"),t=await e.json();t.success?ei(t.feeds):ej(t.error||"RSS 피드를 불러오는 중 오류가 발생했습니다.")}catch(e){ej("RSS 피드를 불러오는 중 오류가 발생했습니다.")}finally{ec(!1)}},eH=async()=>{if(!eh.name.trim()||!eh.url.trim()){ej("피드 이름과 URL을 입력해주세요.");return}ec(!0),ej(null),eS(null);try{let e=await fetch("/api/feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(eh)}),t=await e.json();t.success?(ei(t.feeds),eS("RSS 피드가 추가되었습니다."),eg({name:"",url:"",type:"noncompetitor",status:"active"})):ej(t.error||"RSS 피드 추가 중 오류가 발생했습니다.")}catch(e){ej("RSS 피드 추가 중 오류가 발생했습니다.")}finally{ec(!1)}},eM=e=>{ep(e),ef({...e})},eG=async()=>{if(!em){ej("수정할 피드가 선택되지 않았습니다.");return}if(!ey.name.trim()||!ey.url.trim()){ej("피드 이름과 URL을 입력해주세요.");return}ec(!0),ej(null),eS(null);try{let e=await fetch("/api/feeds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:em.name,...ey})}),t=await e.json();t.success?(ei(t.feeds),eS("RSS 피드가 수정되었습니다."),ep(null),ef({name:"",url:"",type:"noncompetitor",status:"active"})):ej(t.error||"RSS 피드 수정 중 오류가 발생했습니다.")}catch(e){ej("RSS 피드 수정 중 오류가 발생했습니다.")}finally{ec(!1)}},eZ=async e=>{if(window.confirm('RSS 피드 "'.concat(e.name,'"을(를) 삭제하시겠습니까?'))){ec(!0),ej(null),eS(null);try{let t=await fetch("/api/feeds",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name})}),a=await t.json();a.success?(ei(a.feeds),eS("RSS 피드가 삭제되었습니다.")):ej(a.error||"RSS 피드 삭제 중 오류가 발생했습니다.")}catch(e){ej("RSS 피드 삭제 중 오류가 발생했습니다.")}finally{ec(!1)}}};return(0,n.useEffect)(()=>{ed&&ez()},[ed]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"DATA INSIGHTS - ".concat(o.j)}),(0,s.jsx)("meta",{name:"description",content:"RSS 피드 관리 및 뉴스레터 서비스"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.svg"})]}),(0,s.jsxs)("div",{className:"rss-feed-container",children:[(0,s.jsxs)("div",{className:"rss-header",children:[(0,s.jsx)("h1",{children:"DATA INSIGHTS"}),(0,s.jsxs)("div",{className:"rss-controls",style:{justifyContent:"center"},children:[(0,s.jsx)("input",{type:"text",value:A,onChange:e=>L(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eP()},placeholder:"블로그명, 제목, 내용 검색",className:"blog-search-input"}),(0,s.jsxs)("select",{value:P,onChange:e=>eL(e.target.value),className:"blog-filter",children:[(0,s.jsx)("option",{value:"all",children:"전체"}),(0,s.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,s.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,s.jsx)("button",{type:"button",onClick:eP,className:"migrate-btn","data-clarity-tag":"rss-feed-search-button",children:"검색"}),A&&(0,s.jsx)("button",{type:"button",onClick:()=>{L(""),eD(m,1,b,P,"")},className:"migrate-btn",style:{background:"#ef4444",marginLeft:"8px"},"data-clarity-tag":"rss-feed-search-reset-button",children:"초기화"})]}),(0,s.jsx)("br",{}),e&&(0,s.jsxs)("div",{className:"rss-controls",style:{justifyContent:"center"},children:[(0,s.jsx)("button",{type:"button",onClick:()=>M(!H),className:"migrate-btn",style:{background:H?"#ef4444":"#10b981"},"data-clarity-tag":"rss-feed-keyword-manager-toggle",children:H?"RSS 수집 키워드 관리 닫기":"RSS 수집 키워드 관리"}),(0,s.jsx)("button",{type:"button",onClick:()=>eu(!ed),className:"migrate-btn",style:{background:ed?"#ef4444":"#3b82f6"},"data-clarity-tag":"rss-feed-feed-manager-toggle",children:ed?"RSS FEED URL 관리 닫기":"RSS FEED URL 관리"})]})]}),H&&(0,s.jsxs)("div",{className:"keyword-manager-section",children:[(0,s.jsxs)("div",{className:"keyword-manager-header",children:[(0,s.jsx)("h3",{children:"RSS 수집용 키워드 관리"}),(0,s.jsx)("button",{onClick:()=>M(!1),className:"close-btn","data-clarity-tag":"rss-feed-keyword-manager-close",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"info-box",children:[(0,s.jsx)("strong",{children:"설명:"})," 이 키워드들은 RSS 피드 수집 시 필터링에 사용됩니다. 경쟁사 블로그의 모든 글은 자동으로 수집되고, 비경쟁사 블로그는 이 키워드가 포함된 글만 수집됩니다."]}),ea&&(0,s.jsx)("div",{className:"error-message",children:ea}),en&&(0,s.jsx)("div",{className:"success-message",children:en}),(0,s.jsxs)("div",{className:"add-keyword-section",children:[(0,s.jsx)("h4",{children:"새 키워드 추가"}),(0,s.jsxs)("div",{className:"keyword-input-group",children:[(0,s.jsx)("input",{type:"text",value:Q,onChange:e=>V(e.target.value),onKeyDown:e=>"Enter"===e.key&&eU(),placeholder:"새 키워드를 입력하세요",disabled:B}),(0,s.jsx)("button",{onClick:eU,disabled:B||!Q.trim(),className:"add-btn","data-clarity-tag":"rss-feed-keyword-add-button",children:B?"추가 중...":"추가"})]})]}),(0,s.jsxs)("div",{className:"keyword-list-section",children:[(0,s.jsxs)("h4",{children:["현재 키워드 목록 (",W.length,"개)"]}),B&&0===W.length?(0,s.jsx)("div",{className:"loading-message",children:"키워드를 불러오는 중..."}):0===W.length?(0,s.jsx)("div",{className:"empty-message",children:"등록된 키워드가 없습니다."}):(0,s.jsx)("div",{className:"keyword-grid",children:W.map((e,t)=>(0,s.jsx)("div",{className:"keyword-item",children:Y===e?(0,s.jsxs)("div",{className:"keyword-edit-group",children:[(0,s.jsx)("input",{type:"text",value:ee,onChange:e=>et(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eJ(),"Escape"===e.key&&($(null),et(""))},autoFocus:!0}),(0,s.jsx)("button",{onClick:eJ,disabled:B,className:"save-btn",children:"저장"}),(0,s.jsx)("button",{onClick:()=>{$(null),et("")},disabled:B,className:"cancel-btn",children:"취소"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"keyword-text",children:e}),(0,s.jsxs)("div",{className:"keyword-actions",children:[(0,s.jsx)("button",{onClick:()=>eF(e),disabled:B,className:"edit-btn","data-clarity-tag":"rss-feed-keyword-edit-button",children:"수정"}),(0,s.jsx)("button",{onClick:()=>eI(e),disabled:B,className:"delete-btn","data-clarity-tag":"rss-feed-keyword-delete-button",children:"삭제"})]})]})},t))})]})]}),ed&&(0,s.jsxs)("div",{className:"feed-manager-section",children:[(0,s.jsxs)("div",{className:"feed-manager-header",children:[(0,s.jsx)("h3",{children:"RSS 피드 관리"}),(0,s.jsx)("button",{onClick:()=>eu(!1),className:"close-btn","data-clarity-tag":"rss-feed-feed-manager-close",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"info-box",children:[(0,s.jsx)("strong",{children:"설명:"})," RSS 피드를 추가, 수정, 삭제할 수 있습니다. 경쟁사 피드는 키워드 필터 없이 모든 글을 수집하고, 비경쟁사 피드는 키워드가 포함된 글만 수집합니다."]}),ex&&(0,s.jsx)("div",{className:"error-message",children:ex}),eb&&(0,s.jsx)("div",{className:"success-message",children:eb}),(0,s.jsxs)("div",{className:"add-feed-section",children:[(0,s.jsx)("h4",{children:"새 RSS 피드 추가"}),(0,s.jsxs)("div",{className:"feed-input-group",children:[(0,s.jsxs)("div",{className:"feed-input-row",children:[(0,s.jsx)("input",{type:"text",value:eh.name,onChange:e=>eg({...eh,name:e.target.value}),placeholder:"피드 이름",disabled:eo}),(0,s.jsx)("input",{type:"text",value:eh.url,onChange:e=>eg({...eh,url:e.target.value}),placeholder:"RSS URL",disabled:eo})]}),(0,s.jsxs)("div",{className:"feed-input-row",children:[(0,s.jsxs)("select",{value:eh.type,onChange:e=>eg({...eh,type:e.target.value}),disabled:eo,children:[(0,s.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,s.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,s.jsxs)("select",{value:eh.status,onChange:e=>eg({...eh,status:e.target.value}),disabled:eo,children:[(0,s.jsx)("option",{value:"active",children:"활성"}),(0,s.jsx)("option",{value:"error",children:"에러"})]}),(0,s.jsx)("button",{onClick:eH,disabled:eo||!eh.name.trim()||!eh.url.trim(),className:"add-btn","data-clarity-tag":"rss-feed-feed-add-button",children:eo?"추가 중...":"추가"})]})]})]}),(0,s.jsxs)("div",{className:"feed-list-section",children:[(0,s.jsxs)("h4",{children:["현재 RSS 피드 목록 (",el.length,"개)"]}),eo&&0===el.length?(0,s.jsx)("div",{className:"loading-message",children:"RSS 피드를 불러오는 중..."}):0===el.length?(0,s.jsx)("div",{className:"empty-message",children:"등록된 RSS 피드가 없습니다."}):(0,s.jsx)("div",{className:"feed-grid",children:el.map((e,t)=>(0,s.jsx)("div",{className:"feed-item",children:(null==em?void 0:em.name)===e.name?(0,s.jsxs)("div",{className:"feed-edit-group",children:[(0,s.jsxs)("div",{className:"feed-edit-row",children:[(0,s.jsx)("input",{type:"text",value:ey.name,onChange:e=>ef({...ey,name:e.target.value}),placeholder:"이름"}),(0,s.jsx)("input",{type:"text",value:ey.url,onChange:e=>ef({...ey,url:e.target.value}),placeholder:"URL"})]}),(0,s.jsxs)("div",{className:"feed-edit-row",children:[(0,s.jsxs)("select",{value:ey.type,onChange:e=>ef({...ey,type:e.target.value}),children:[(0,s.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,s.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,s.jsxs)("select",{value:ey.status,onChange:e=>ef({...ey,status:e.target.value}),children:[(0,s.jsx)("option",{value:"active",children:"활성"}),(0,s.jsx)("option",{value:"error",children:"에러"})]}),(0,s.jsx)("button",{onClick:eG,disabled:eo,className:"save-btn",children:"저장"}),(0,s.jsx)("button",{onClick:()=>{ep(null),ef({name:"",url:"",type:"noncompetitor",status:"active"})},disabled:eo,className:"cancel-btn",children:"취소"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"feed-info",children:[(0,s.jsx)("div",{className:"feed-name",children:e.name}),(0,s.jsx)("div",{className:"feed-url",children:e.url}),(0,s.jsxs)("div",{className:"feed-tags",children:[(0,s.jsx)("span",{className:"feed-type-tag ".concat(e.type),children:"competitor"===e.type?"경쟁":"비경쟁"}),(0,s.jsx)("span",{className:"feed-status-tag ".concat(e.status),children:"active"===e.status?"활성":"에러"})]})]}),(0,s.jsxs)("div",{className:"feed-actions",children:[(0,s.jsx)("button",{onClick:()=>eM(e),disabled:eo,className:"edit-btn","data-clarity-tag":"rss-feed-feed-edit-button",children:"수정"}),(0,s.jsx)("button",{onClick:()=>eZ(e),disabled:eo,className:"delete-btn","data-clarity-tag":"rss-feed-feed-delete-button",children:"삭제"})]})]})},t))})]})]}),d&&(0,s.jsx)("div",{className:"loading",children:(0,s.jsx)("p",{children:"RSS 데이터를 불러오는 중..."})}),h&&(0,s.jsx)("div",{className:"error",children:(0,s.jsxs)("p",{children:["오류: ",h]})}),!d&&!h&&(0,s.jsxs)("div",{className:"rss-content",children:[(0,s.jsxs)("div",{className:"stats",children:[(0,s.jsxs)("p",{children:["all"!==P&&(0,s.jsx)(s.Fragment,{children:"competitor"===P?"경쟁사에서 ":"비경쟁사에서 "}),A?'"'.concat(A,'"로 검색한 결과 총 ').concat(null!=ev?ev:v,"개의 RSS 아이템"):"총 ".concat(null!=ev?ev:v,"개의 RSS 아이템"),"(페이지 ",x," / ",eN,")"]}),A&&(0,s.jsxs)("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",padding:"8px 12px",marginTop:"8px",fontSize:"13px",color:"#0369a1"},children:["\uD83D\uDD0D 검색어: ",(0,s.jsxs)("strong",{children:['"',A,'"']}),(0,s.jsx)("button",{onClick:()=>{L(""),eD(m,1,b,P,"")},style:{background:"none",border:"none",color:"#0369a1",textDecoration:"underline",cursor:"pointer",marginLeft:"8px"},children:"검색 초기화"})]}),(0,s.jsxs)("select",{value:b,onChange:e=>eR(Number(e.target.value)),className:"page-size-select","data-clarity-tag":"rss-feed-page-size-select",children:[(0,s.jsx)("option",{value:12,children:"12개씩 보기"}),(0,s.jsx)("option",{value:24,children:"24개씩 보기"}),(0,s.jsx)("option",{value:36,children:"36개씩 보기"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{Z(e=>"list"===e?"card":"list")},className:"view-mode-toggle",style:{background:"card"===G?"#3b82f6":"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",marginLeft:"12px",fontWeight:"500"},"data-clarity-tag":"rss-feed-view-mode-toggle",children:"card"===G?"\uD83D\uDCCB 목록으로 보기":"\uD83C\uDCCF 카드로 보기"}),(0,s.jsx)("button",{type:"button",onClick:()=>t.push("/blog/write"),className:"write-article-button",style:{background:"#10b981",border:"1px solid #059669",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",marginLeft:"12px",fontWeight:"500",color:"white"},"data-clarity-tag":"rss-feed-write-article",children:"✍️ 글작성"})]}),e&&(0,s.jsxs)("div",{className:"info-banner",style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"12px 16px",margin:"16px 0",fontSize:"14px"},children:[(0,s.jsx)("strong",{children:"\uD83D\uDCC5 RSS 수집 정보:"})," 매일 오전 6시(한국시간)에 ",(0,s.jsx)("strong",{children:"전일 작성된 글"}),"을 자동 수집합니다. 작성일은 ",(0,s.jsx)("strong",{children:"GMT(원본 시간) / KST(한국시간)"})," 순으로 표시됩니다."]}),(0,s.jsx)("div",{className:"rss-grid ".concat("card"===G?"rss-grid-card":"rss-grid-list"),children:a.map((t,a)=>{let n=C[t.guid]||t.matchedKeywords||[],l=Array.isArray(n)?n:[],i=(ev||v)-(x-1)*b-a,o="Logbase"===t.blogName,c=o?"/blog/".concat(t.guid):t.link;return(0,s.jsxs)("article",{className:"rss-item ".concat("card"===G?"rss-item-card":"rss-item-list"),children:[(0,s.jsxs)("div",{className:"rss-meta",children:[(0,s.jsxs)("span",{className:"item-number",children:["#",i]}),(0,s.jsx)("span",{className:"blog-name",children:t.blogName}),(0,s.jsx)("span",{className:"feed-type ".concat(t.feedType),children:"competitor"===t.feedType?"competitor":"noncompetitor"===t.feedType?"noncompetitor":"Logbase"}),(0,s.jsxs)("span",{className:"date",children:[t.author?"".concat(t.author," / "):"",eO(t.isoDate)]})]}),(0,s.jsx)("h3",{className:"rss-title",children:(0,s.jsx)("a",{href:c,target:o?"_self":"_blank",rel:"noopener noreferrer","data-clarity-tag":"rss-feed-article-link",children:t.title})}),(0,s.jsx)("p",{className:"rss-description",children:(0,s.jsx)("a",{href:c,target:o?"_self":"_blank",rel:"noopener noreferrer","data-clarity-tag":"rss-feed-article-link-desc",children:t.description?(0,s.jsx)(s.Fragment,{children:(()=>{let e=t.description.replace(/<[^>]*>/g,"").replace(/data:image\/[^;]+;base64,[A-Za-z0-9+/=]+/g,"[이미지 데이터]").replace(/\n+/g," ").trim();return e.slice(0,200)+(e.length>200?"...":"")})()}):"설명이 없습니다."})}),e&&l.length>0&&(0,s.jsxs)("div",{className:"keywords",children:[(0,s.jsx)("strong",{children:"키워드:"})," ",l.map((e,a)=>(0,s.jsxs)("span",{className:"keyword-tag",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>e_(t.guid,e),className:"keyword-delete-btn",disabled:!!T[t.guid],"aria-label":"키워드 ".concat(e," 삭제"),"data-clarity-tag":"rss-feed-keyword-delete-item",children:"\xd7"})]},e))]}),e&&(0,s.jsxs)("div",{className:"keyword-input-row ".concat("card"===G?"keyword-input-card":""),children:[(0,s.jsx)("input",{type:"text",value:N[t.guid]||"",onChange:e=>k(a=>({...a,[t.guid]:e.target.value})),placeholder:"키워드 입력 (쉼표로 구분)",disabled:!!T[t.guid]}),(0,s.jsx)("button",{type:"button",onClick:()=>eE(t.guid),className:"add-keyword-btn",disabled:!!T[t.guid],"data-clarity-tag":"rss-feed-keyword-add-item",children:T[t.guid]?"저장중...":"추가"}),(0,s.jsx)("button",{type:"button",onClick:()=>eA(t.guid),className:"delete-item-btn",disabled:!!E[t.guid],"data-clarity-tag":"rss-feed-article-delete",children:E[t.guid]?"삭제중...":"글삭제"})]}),e&&(0,s.jsxs)("div",{className:"newsletter-date-row ".concat("card"===G?"newsletter-date-card":""),children:[(0,s.jsx)("label",{htmlFor:"newsletter-date-".concat(t.guid),children:"뉴스레터 발송일:"}),(0,s.jsx)("input",{type:"date",id:"newsletter-date-".concat(t.guid),value:F[t.guid]||t.news_letter_sent_date||"",onChange:e=>J(a=>({...a,[t.guid]:e.target.value}))}),(0,s.jsx)("button",{type:"button",onClick:async()=>{if(F[t.guid]){z(e=>({...e,[t.guid]:!0}));try{let e=await fetch("/api/rss-migrate/newsletter-date",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:t.guid,news_letter_sent_date:F[t.guid]})}),a=await e.json();a.success?(r(e=>e.map(e=>e.guid===t.guid?{...e,news_letter_sent_date:F[t.guid]}:e)),alert("뉴스레터 발송일이 저장되었습니다.")):alert("뉴스레터 발송일 저장 실패: "+(a.error||a.message))}catch(e){alert("뉴스레터 발송일 저장 중 오류 발생")}finally{z(e=>({...e,[t.guid]:!1}))}}},className:"save-newsletter-btn",disabled:!F[t.guid]||!!I[t.guid],"data-clarity-tag":"rss-feed-newsletter-date-save",children:I[t.guid]?"저장중...":"저장"})]})]},"".concat(t.guid,"-").concat(a))})}),(0,s.jsxs)("div",{className:"pagination",children:[(0,s.jsx)("button",{onClick:()=>eT(x-1),disabled:1===x,"data-clarity-tag":"rss-feed-pagination-prev",children:"이전"}),(()=>{let e=[],t=x>3,a=x<eN-2;1===x?e.push((0,s.jsx)("button",{className:"active-page",disabled:!0,children:1},1)):e.push((0,s.jsx)("button",{onClick:()=>eT(1),"data-clarity-tag":"rss-feed-pagination-first",children:1},1)),t&&e.push((0,s.jsx)("span",{children:"..."},"left-ellipsis"));let n=Math.max(x-2,2),r=Math.min(x+2,eN-1);for(let t=n;t<=r;t++)1!==t&&t!==eN&&(t===x?e.push((0,s.jsx)("button",{className:"active-page",disabled:!0,children:t},t)):e.push((0,s.jsx)("button",{onClick:()=>eT(t),"data-clarity-tag":"rss-feed-pagination-page-".concat(t),children:t},t)));return a&&e.push((0,s.jsx)("span",{children:"..."},"right-ellipsis")),1!==eN&&(eN===x?e.push((0,s.jsx)("button",{className:"active-page",disabled:!0,children:eN},eN)):e.push((0,s.jsx)("button",{onClick:()=>eT(eN),"data-clarity-tag":"rss-feed-pagination-last",children:eN},eN))),e})(),(0,s.jsx)("button",{onClick:()=>eT(x+1),disabled:x===eN,"data-clarity-tag":"rss-feed-pagination-next",children:"다음"})]})]})]})]})}},1163:function(e,t,a){e.exports=a(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3883)}),_N_E=e.O()}]);