(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{3883:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rss-feed",function(){return s(1397)}])},4611:function(e,t,s){"use strict";s.d(t,{j:function(){return a}});let a="Logbase"},1397:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(5893),n=s(7294),l=s(9008),i=s.n(l),r=s(4611),c=s(6317);function d(){let{user:e}=(0,c.a)(),[t,s]=(0,n.useState)([]),[l,d]=(0,n.useState)(!0),[o,u]=(0,n.useState)(null),[h,m]=(0,n.useState)("all"),[p,g]=(0,n.useState)(!1),[x,j]=(0,n.useState)(1),[y,f]=(0,n.useState)(10),[S,v]=(0,n.useState)(0),[b,N]=(0,n.useState)({}),[w,C]=(0,n.useState)({}),[k,R]=(0,n.useState)({}),[T,D]=(0,n.useState)({}),[E,_]=(0,n.useState)(""),[L,O]=(0,n.useState)("all"),[P,K]=(0,n.useState)(0),[U,F]=(0,n.useState)({}),[J,A]=(0,n.useState)({}),[M,z]=(0,n.useState)(!1),[I,G]=(0,n.useState)([]),[X,Z]=(0,n.useState)(!1),[H,q]=(0,n.useState)(""),[B,Q]=(0,n.useState)(null),[V,W]=(0,n.useState)(""),[Y,$]=(0,n.useState)(null),[ee,et]=(0,n.useState)(null),[es,ea]=(0,n.useState)([]),[en,el]=(0,n.useState)(!1),[ei,er]=(0,n.useState)(!1),[ec,ed]=(0,n.useState)({name:"",url:"",type:"noncompetitor",status:"active"}),[eo,eu]=(0,n.useState)(null),[eh,em]=(0,n.useState)({name:"",url:"",type:"noncompetitor",status:"active"}),[ep,eg]=(0,n.useState)(null),[ex,ej]=(0,n.useState)(null),[ey,ef]=(0,n.useState)(void 0),[eS,ev]=(0,n.useState)(0),eb=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;try{d(!0),u(null),console.log("\uD83D\uDD04 RSS 데이터 로딩 시작:",{blogName:e,page:t,pageSize:a,feedTypeParam:n,searchTextParam:l});let r=new URLSearchParams;e&&"all"!==e&&r.append("blogName",e),r.append("page",String(t)),r.append("pageSize",String(a)),n&&"all"!==n&&r.append("feedType",n),l&&r.append("searchText",l);let c="/api/rss-migrate?".concat(r);console.log("\uD83D\uDCE1 API 요청 URL:",c);let o=await fetch(c);if(console.log("\uD83D\uDCE1 API 응답 상태:",o.status,o.statusText),!o.ok)throw Error("HTTP error! status: ".concat(o.status));let h=await o.json();if(console.log("\uD83D\uDCE1 API 응답 데이터:",h),h.success){var i;s(h.data||[]),v(h.totalCount||0),ef(h.filteredCount),ev(h.totalPages||Math.ceil((h.filteredCount||h.totalCount)/a)),console.log("✅ RSS 데이터 로딩 완료:",{itemsCount:(null===(i=h.data)||void 0===i?void 0:i.length)||0,totalCount:h.totalCount||0,filteredCount:h.filteredCount})}else console.error("❌ API 응답 에러:",h.error),u(h.error||"데이터를 불러오는 중 오류가 발생했습니다.")}catch(e){console.error("❌ RSS 데이터 로딩 에러:",e),u("RSS 데이터를 불러오는 중 오류가 발생했습니다.")}finally{d(!1)}},eN=e=>{j(e),eb("all"===h?void 0:h,e,y,L,E)},ew=e=>{f(e),j(1),eb("all"===h?void 0:h,1,e,L,E)},eC=async e=>{var s;let a=null===(s=b[e])||void 0===s?void 0:s.trim();if(!a)return;let n=a.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(0===n.length)return;R(t=>({...t,[e]:!0}));let l=t.find(t=>t.guid===e),i=Array.from(new Set([...w[e]||(null==l?void 0:l.matchedKeywords)||[],...n]));try{let t=await fetch("/api/rss-migrate/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:e,matchedKeywords:i})}),s=await t.json();s.success?(C(t=>({...t,[e]:i})),N(t=>({...t,[e]:""}))):alert("키워드 저장 실패: "+s.error)}catch(e){alert("키워드 저장 중 오류 발생")}finally{R(t=>({...t,[e]:!1}))}},ek=async(e,s)=>{if(!window.confirm('키워드 "'.concat(s,'"을(를) 삭제하시겠습니까?')))return;let a=t.find(t=>t.guid===e),n=(w[e]||(null==a?void 0:a.matchedKeywords)||[]).filter(e=>e!==s);R(t=>({...t,[e]:!0}));try{let t=await fetch("/api/rss-migrate/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:e,matchedKeywords:n})}),s=await t.json();s.success?C(t=>({...t,[e]:n})):alert("키워드 삭제 실패: "+s.error)}catch(e){alert("키워드 삭제 중 오류 발생")}finally{R(t=>({...t,[e]:!1}))}},eR=async e=>{if(window.confirm("이 글을 삭제하시겠습니까?")){D(t=>({...t,[e]:!0}));try{let t=await fetch("/api/rss-migrate/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:e})}),a=await t.json();a.success?(s(t=>t.filter(t=>t.guid!==e)),C(t=>{let s={...t};return delete s[e],s})):alert("글 삭제 실패: "+a.error)}catch(e){alert("글 삭제 중 오류 발생")}finally{D(t=>({...t,[e]:!1}))}}},eT=e=>{O(e),j(1),eb(h,1,y,e,E)};(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("search");e?(_(e),eb(h,1,y,L,e)):eb(h,1,y)},[]),Array.from(new Set(t.map(e=>e.blogName))).sort().filter(e=>{var s;let a=!E||e.toLowerCase().includes(E.toLowerCase());if("all"===L)return a;let n=(null===(s=t.find(t=>t.blogName===e))||void 0===s?void 0:s.feedType)===L;return a&&n});let eD=()=>{j(1),eb("all"===h?void 0:h,1,y,L,E)},eE=e=>{let t=new Date(e),s=t.toLocaleString("ko-KR",{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),a=t.toLocaleString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return"".concat(s," GMT / ").concat(a," KST")},e_=async()=>{try{Z(!0);let e=await fetch("/api/keywords"),t=await e.json();t.success?G(t.keywords):$("키워드 목록을 불러올 수 없습니다.")}catch(e){$("키워드 목록을 불러오는 중 오류가 발생했습니다.")}finally{Z(!1)}},eL=async()=>{if(!H.trim()){$("키워드를 입력해주세요.");return}try{Z(!0),$(null);let e=await fetch("/api/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:H.trim()})}),t=await e.json();t.success?(G(t.keywords),q(""),et("키워드가 추가되었습니다."),setTimeout(()=>et(null),3e3)):$(t.error)}catch(e){$("키워드 추가 중 오류가 발생했습니다.")}finally{Z(!1)}},eO=e=>{Q(e),W(e)},eP=async()=>{if(!B||!V.trim()){$("키워드를 입력해주세요.");return}try{Z(!0),$(null);let e=await fetch("/api/keywords",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldKeyword:B,newKeyword:V.trim()})}),t=await e.json();t.success?(G(t.keywords),Q(null),W(""),et("키워드가 수정되었습니다."),setTimeout(()=>et(null),3e3)):$(t.error)}catch(e){$("키워드 수정 중 오류가 발생했습니다.")}finally{Z(!1)}},eK=async e=>{if(window.confirm('키워드 "'.concat(e,'"을(를) 삭제하시겠습니까?')))try{Z(!0),$(null);let t=await fetch("/api/keywords",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:e})}),s=await t.json();s.success?(G(s.keywords),et("키워드가 삭제되었습니다."),setTimeout(()=>et(null),3e3)):$(s.error)}catch(e){$("키워드 삭제 중 오류가 발생했습니다.")}finally{Z(!1)}};(0,n.useEffect)(()=>{M&&e_()},[M]);let eU=async()=>{el(!0);try{let e=await fetch("/api/feeds"),t=await e.json();t.success?ea(t.feeds):eg(t.error||"RSS 피드를 불러오는 중 오류가 발생했습니다.")}catch(e){eg("RSS 피드를 불러오는 중 오류가 발생했습니다.")}finally{el(!1)}},eF=async()=>{if(!ec.name.trim()||!ec.url.trim()){eg("피드 이름과 URL을 입력해주세요.");return}el(!0),eg(null),ej(null);try{let e=await fetch("/api/feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ec)}),t=await e.json();t.success?(ea(t.feeds),ej("RSS 피드가 추가되었습니다."),ed({name:"",url:"",type:"noncompetitor",status:"active"})):eg(t.error||"RSS 피드 추가 중 오류가 발생했습니다.")}catch(e){eg("RSS 피드 추가 중 오류가 발생했습니다.")}finally{el(!1)}},eJ=e=>{eu(e),em({...e})},eA=async()=>{if(!eh.name.trim()||!eh.url.trim()){eg("피드 이름과 URL을 입력해주세요.");return}el(!0),eg(null),ej(null);try{let e=await fetch("/api/feeds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:eo.name,...eh})}),t=await e.json();t.success?(ea(t.feeds),ej("RSS 피드가 수정되었습니다."),eu(null),em({name:"",url:"",type:"noncompetitor",status:"active"})):eg(t.error||"RSS 피드 수정 중 오류가 발생했습니다.")}catch(e){eg("RSS 피드 수정 중 오류가 발생했습니다.")}finally{el(!1)}},eM=async e=>{if(window.confirm('RSS 피드 "'.concat(e.name,'"을(를) 삭제하시겠습니까?'))){el(!0),eg(null),ej(null);try{let t=await fetch("/api/feeds",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name})}),s=await t.json();s.success?(ea(s.feeds),ej("RSS 피드가 삭제되었습니다.")):eg(s.error||"RSS 피드 삭제 중 오류가 발생했습니다.")}catch(e){eg("RSS 피드 삭제 중 오류가 발생했습니다.")}finally{el(!1)}}};return(0,n.useEffect)(()=>{ei&&eU()},[ei]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"RSS 피드 - ".concat(r.j)}),(0,a.jsx)("meta",{name:"description",content:"RSS 피드 관리 및 뉴스레터 서비스"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.svg"})]}),(0,a.jsxs)("div",{className:"rss-feed-container",children:[(0,a.jsxs)("div",{className:"rss-header",children:[(0,a.jsx)("h1",{children:"RSS Feed Collection"}),(0,a.jsxs)("div",{className:"rss-controls",style:{justifyContent:"center"},children:[(0,a.jsx)("input",{type:"text",value:E,onChange:e=>_(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eD()},placeholder:"블로그명, 제목, 내용 검색",className:"blog-search-input"}),(0,a.jsxs)("select",{value:L,onChange:e=>eT(e.target.value),className:"blog-filter",children:[(0,a.jsx)("option",{value:"all",children:"전체"}),(0,a.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,a.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,a.jsx)("button",{type:"button",onClick:eD,className:"migrate-btn",children:"검색"}),E&&(0,a.jsx)("button",{type:"button",onClick:()=>{_(""),eb(h,1,y,L,"")},className:"migrate-btn",style:{background:"#ef4444",marginLeft:"8px"},children:"초기화"})]}),(0,a.jsx)("br",{}),e&&(0,a.jsxs)("div",{className:"rss-controls",style:{justifyContent:"center"},children:[(0,a.jsx)("button",{type:"button",onClick:()=>z(!M),className:"migrate-btn",style:{background:M?"#ef4444":"#10b981"},children:M?"RSS 수집 키워드 관리 닫기":"RSS 수집 키워드 관리"}),(0,a.jsx)("button",{type:"button",onClick:()=>er(!ei),className:"migrate-btn",style:{background:ei?"#ef4444":"#3b82f6"},children:ei?"RSS FEED URL 관리 닫기":"RSS FEED URL 관리"})]})]}),M&&(0,a.jsxs)("div",{className:"keyword-manager-section",children:[(0,a.jsxs)("div",{className:"keyword-manager-header",children:[(0,a.jsx)("h3",{children:"RSS 수집용 키워드 관리"}),(0,a.jsx)("button",{onClick:()=>z(!1),className:"close-btn",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"info-box",children:[(0,a.jsx)("strong",{children:"설명:"})," 이 키워드들은 RSS 피드 수집 시 필터링에 사용됩니다. 경쟁사 블로그의 모든 글은 자동으로 수집되고, 비경쟁사 블로그는 이 키워드가 포함된 글만 수집됩니다."]}),Y&&(0,a.jsx)("div",{className:"error-message",children:Y}),ee&&(0,a.jsx)("div",{className:"success-message",children:ee}),(0,a.jsxs)("div",{className:"add-keyword-section",children:[(0,a.jsx)("h4",{children:"새 키워드 추가"}),(0,a.jsxs)("div",{className:"keyword-input-group",children:[(0,a.jsx)("input",{type:"text",value:H,onChange:e=>q(e.target.value),onKeyDown:e=>"Enter"===e.key&&eL(),placeholder:"새 키워드를 입력하세요",disabled:X}),(0,a.jsx)("button",{onClick:eL,disabled:X||!H.trim(),className:"add-btn",children:X?"추가 중...":"추가"})]})]}),(0,a.jsxs)("div",{className:"keyword-list-section",children:[(0,a.jsxs)("h4",{children:["현재 키워드 목록 (",I.length,"개)"]}),X&&0===I.length?(0,a.jsx)("div",{className:"loading-message",children:"키워드를 불러오는 중..."}):0===I.length?(0,a.jsx)("div",{className:"empty-message",children:"등록된 키워드가 없습니다."}):(0,a.jsx)("div",{className:"keyword-grid",children:I.map((e,t)=>(0,a.jsx)("div",{className:"keyword-item",children:B===e?(0,a.jsxs)("div",{className:"keyword-edit-group",children:[(0,a.jsx)("input",{type:"text",value:V,onChange:e=>W(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eP(),"Escape"===e.key&&(Q(null),W(""))},autoFocus:!0}),(0,a.jsx)("button",{onClick:eP,disabled:X,className:"save-btn",children:"저장"}),(0,a.jsx)("button",{onClick:()=>{Q(null),W("")},disabled:X,className:"cancel-btn",children:"취소"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"keyword-text",children:e}),(0,a.jsxs)("div",{className:"keyword-actions",children:[(0,a.jsx)("button",{onClick:()=>eO(e),disabled:X,className:"edit-btn",children:"수정"}),(0,a.jsx)("button",{onClick:()=>eK(e),disabled:X,className:"delete-btn",children:"삭제"})]})]})},t))})]})]}),ei&&(0,a.jsxs)("div",{className:"feed-manager-section",children:[(0,a.jsxs)("div",{className:"feed-manager-header",children:[(0,a.jsx)("h3",{children:"RSS 피드 관리"}),(0,a.jsx)("button",{onClick:()=>er(!1),className:"close-btn",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"info-box",children:[(0,a.jsx)("strong",{children:"설명:"})," RSS 피드를 추가, 수정, 삭제할 수 있습니다. 경쟁사 피드는 키워드 필터 없이 모든 글을 수집하고, 비경쟁사 피드는 키워드가 포함된 글만 수집합니다."]}),ep&&(0,a.jsx)("div",{className:"error-message",children:ep}),ex&&(0,a.jsx)("div",{className:"success-message",children:ex}),(0,a.jsxs)("div",{className:"add-feed-section",children:[(0,a.jsx)("h4",{children:"새 RSS 피드 추가"}),(0,a.jsxs)("div",{className:"feed-input-group",children:[(0,a.jsxs)("div",{className:"feed-input-row",children:[(0,a.jsx)("input",{type:"text",value:ec.name,onChange:e=>ed({...ec,name:e.target.value}),placeholder:"피드 이름",disabled:en}),(0,a.jsx)("input",{type:"text",value:ec.url,onChange:e=>ed({...ec,url:e.target.value}),placeholder:"RSS URL",disabled:en})]}),(0,a.jsxs)("div",{className:"feed-input-row",children:[(0,a.jsxs)("select",{value:ec.type,onChange:e=>ed({...ec,type:e.target.value}),disabled:en,children:[(0,a.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,a.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,a.jsxs)("select",{value:ec.status,onChange:e=>ed({...ec,status:e.target.value}),disabled:en,children:[(0,a.jsx)("option",{value:"active",children:"활성"}),(0,a.jsx)("option",{value:"error",children:"에러"})]}),(0,a.jsx)("button",{onClick:eF,disabled:en||!ec.name.trim()||!ec.url.trim(),className:"add-btn",children:en?"추가 중...":"추가"})]})]})]}),(0,a.jsxs)("div",{className:"feed-list-section",children:[(0,a.jsxs)("h4",{children:["현재 RSS 피드 목록 (",es.length,"개)"]}),en&&0===es.length?(0,a.jsx)("div",{className:"loading-message",children:"RSS 피드를 불러오는 중..."}):0===es.length?(0,a.jsx)("div",{className:"empty-message",children:"등록된 RSS 피드가 없습니다."}):(0,a.jsx)("div",{className:"feed-grid",children:es.map((e,t)=>(0,a.jsx)("div",{className:"feed-item",children:(null==eo?void 0:eo.name)===e.name?(0,a.jsxs)("div",{className:"feed-edit-group",children:[(0,a.jsxs)("div",{className:"feed-edit-row",children:[(0,a.jsx)("input",{type:"text",value:eh.name,onChange:e=>em({...eh,name:e.target.value}),placeholder:"이름"}),(0,a.jsx)("input",{type:"text",value:eh.url,onChange:e=>em({...eh,url:e.target.value}),placeholder:"URL"})]}),(0,a.jsxs)("div",{className:"feed-edit-row",children:[(0,a.jsxs)("select",{value:eh.type,onChange:e=>em({...eh,type:e.target.value}),children:[(0,a.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,a.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,a.jsxs)("select",{value:eh.status,onChange:e=>em({...eh,status:e.target.value}),children:[(0,a.jsx)("option",{value:"active",children:"활성"}),(0,a.jsx)("option",{value:"error",children:"에러"})]}),(0,a.jsx)("button",{onClick:eA,disabled:en,className:"save-btn",children:"저장"}),(0,a.jsx)("button",{onClick:()=>{eu(null),em({name:"",url:"",type:"noncompetitor",status:"active"})},disabled:en,className:"cancel-btn",children:"취소"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"feed-info",children:[(0,a.jsx)("div",{className:"feed-name",children:e.name}),(0,a.jsx)("div",{className:"feed-url",children:e.url}),(0,a.jsxs)("div",{className:"feed-tags",children:[(0,a.jsx)("span",{className:"feed-type-tag ".concat(e.type),children:"competitor"===e.type?"경쟁":"비경쟁"}),(0,a.jsx)("span",{className:"feed-status-tag ".concat(e.status),children:"active"===e.status?"활성":"에러"})]})]}),(0,a.jsxs)("div",{className:"feed-actions",children:[(0,a.jsx)("button",{onClick:()=>eJ(e),disabled:en,className:"edit-btn",children:"수정"}),(0,a.jsx)("button",{onClick:()=>eM(e),disabled:en,className:"delete-btn",children:"삭제"})]})]})},t))})]})]}),l&&(0,a.jsx)("div",{className:"loading",children:(0,a.jsx)("p",{children:"RSS 데이터를 불러오는 중..."})}),o&&(0,a.jsx)("div",{className:"error",children:(0,a.jsxs)("p",{children:["오류: ",o]})}),!l&&!o&&(0,a.jsxs)("div",{className:"rss-content",children:[e&&(0,a.jsxs)("div",{className:"info-banner",style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"12px 16px",margin:"16px 0",fontSize:"14px"},children:[(0,a.jsx)("strong",{children:"\uD83D\uDCC5 RSS 수집 정보:"})," 매일 오전 6시(한국시간)에 ",(0,a.jsx)("strong",{children:"전일 작성된 글"}),"을 자동 수집합니다. 작성일은 ",(0,a.jsx)("strong",{children:"GMT(원본 시간) / KST(한국시간)"})," 순으로 표시됩니다."]}),(0,a.jsxs)("div",{className:"stats",children:[(0,a.jsxs)("p",{children:["all"!==L&&(0,a.jsx)(a.Fragment,{children:"competitor"===L?"경쟁사에서 ":"비경쟁사에서 "}),E?'"'.concat(E,'"로 검색한 결과 총 ').concat(null!=ey?ey:S,"개의 RSS 아이템"):"총 ".concat(null!=ey?ey:S,"개의 RSS 아이템"),"(페이지 ",x," / ",eS,")"]}),E&&(0,a.jsxs)("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",padding:"8px 12px",marginTop:"8px",fontSize:"13px",color:"#0369a1"},children:["\uD83D\uDD0D 검색어: ",(0,a.jsxs)("strong",{children:['"',E,'"']}),(0,a.jsx)("button",{onClick:()=>{_(""),eb(h,1,y,L,"")},style:{background:"none",border:"none",color:"#0369a1",textDecoration:"underline",cursor:"pointer",marginLeft:"8px"},children:"검색 초기화"})]}),(0,a.jsxs)("select",{value:y,onChange:e=>ew(Number(e.target.value)),className:"page-size-select",children:[(0,a.jsx)("option",{value:10,children:"10개씩 보기"}),(0,a.jsx)("option",{value:20,children:"20개씩 보기"}),(0,a.jsx)("option",{value:30,children:"30개씩 보기"})]})]}),(0,a.jsx)("div",{className:"rss-grid",children:t.map((t,n)=>{let l=w[t.guid]||t.matchedKeywords,i=(ey||S)-(x-1)*y-n;return(0,a.jsxs)("article",{className:"rss-item",children:[(0,a.jsxs)("div",{className:"rss-meta",children:[(0,a.jsxs)("span",{className:"item-number",children:["#",i]}),(0,a.jsx)("span",{className:"blog-name",children:t.blogName}),(0,a.jsx)("span",{className:"feed-type",children:t.feedType}),(0,a.jsxs)("span",{className:"date",children:[t.author?"".concat(t.author," / "):"",eE(t.isoDate)]})]}),(0,a.jsx)("h3",{className:"rss-title",children:(0,a.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:t.title})}),(0,a.jsx)("p",{className:"rss-description",children:t.description?(0,a.jsxs)(a.Fragment,{children:[t.description.replace(/<[^>]*>/g,"").slice(0,200),t.description.replace(/<[^>]*>/g,"").length>200&&"..."]}):"설명이 없습니다."}),e&&l.length>0&&(0,a.jsxs)("div",{className:"keywords",children:[(0,a.jsx)("strong",{children:"키워드:"})," ",l.map((e,s)=>(0,a.jsxs)("span",{className:"keyword-tag",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>ek(t.guid,e),className:"keyword-delete-btn",disabled:!!k[t.guid],"aria-label":"키워드 ".concat(e," 삭제"),children:"\xd7"})]},e))]}),e&&(0,a.jsxs)("div",{className:"keyword-input-row",children:[(0,a.jsx)("input",{type:"text",value:b[t.guid]||"",onChange:e=>N(s=>({...s,[t.guid]:e.target.value})),placeholder:"키워드 입력 (쉼표로 구분)",disabled:!!k[t.guid]}),(0,a.jsx)("button",{type:"button",onClick:()=>eC(t.guid),className:"add-keyword-btn",disabled:!!k[t.guid],children:k[t.guid]?"저장중...":"추가"}),(0,a.jsx)("button",{type:"button",onClick:()=>eR(t.guid),className:"delete-item-btn",disabled:!!T[t.guid],children:T[t.guid]?"삭제중...":"글삭제"})]}),e&&(0,a.jsxs)("div",{className:"newsletter-date-row",children:[(0,a.jsx)("label",{htmlFor:"newsletter-date-".concat(t.guid),children:"뉴스레터 발송일:"}),(0,a.jsx)("input",{type:"date",id:"newsletter-date-".concat(t.guid),value:U[t.guid]||t.news_letter_sent_date||"",onChange:e=>F(s=>({...s,[t.guid]:e.target.value}))}),(0,a.jsx)("button",{type:"button",onClick:async()=>{if(U[t.guid]){A(e=>({...e,[t.guid]:!0}));try{let e=await fetch("/api/rss-migrate/newsletter-date",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:t.guid,news_letter_sent_date:U[t.guid]})}),a=await e.json();a.success?(s(e=>e.map(e=>e.guid===t.guid?{...e,news_letter_sent_date:U[t.guid]}:e)),alert("뉴스레터 발송일이 저장되었습니다.")):alert("뉴스레터 발송일 저장 실패: "+(a.error||a.message))}catch(e){alert("뉴스레터 발송일 저장 중 오류 발생")}finally{A(e=>({...e,[t.guid]:!1}))}}},className:"save-newsletter-btn",disabled:!U[t.guid]||!!J[t.guid],children:J[t.guid]?"저장중...":"저장"})]})]},"".concat(t.guid,"-").concat(n))})}),(0,a.jsxs)("div",{className:"pagination",children:[(0,a.jsx)("button",{onClick:()=>eN(x-1),disabled:1===x,children:"이전"}),(()=>{let e=[],t=x>3,s=x<eS-2;1===x?e.push((0,a.jsx)("button",{className:"active-page",disabled:!0,children:1},1)):e.push((0,a.jsx)("button",{onClick:()=>eN(1),children:1},1)),t&&e.push((0,a.jsx)("span",{children:"..."},"left-ellipsis"));let n=Math.max(x-2,2),l=Math.min(x+2,eS-1);for(let t=n;t<=l;t++)1!==t&&t!==eS&&(t===x?e.push((0,a.jsx)("button",{className:"active-page",disabled:!0,children:t},t)):e.push((0,a.jsx)("button",{onClick:()=>eN(t),children:t},t)));return s&&e.push((0,a.jsx)("span",{children:"..."},"right-ellipsis")),1!==eS&&(eS===x?e.push((0,a.jsx)("button",{className:"active-page",disabled:!0,children:eS},eS)):e.push((0,a.jsx)("button",{onClick:()=>eN(eS),children:eS},eS))),e})(),(0,a.jsx)("button",{onClick:()=>eN(x+1),disabled:x===eS,children:"다음"})]})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3883)}),_N_E=e.O()}]);