"use strict";(()=>{var e={};e.id=4831,e.ids=[4831,2888,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},2477:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>j,default:()=>h,getServerSideProps:()=>x,getStaticPaths:()=>p,getStaticProps:()=>u,reportWebVitals:()=>m,routeModule:()=>P,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>g,unstable_getStaticProps:()=>b});var r=s(7093),i=s(5244),n=s(1323),l=s(1070),c=s(3893),d=s(7044),o=e([c]);c=(o.then?(await o)():o)[0];let h=(0,n.l)(d,"default"),u=(0,n.l)(d,"getStaticProps"),p=(0,n.l)(d,"getStaticPaths"),x=(0,n.l)(d,"getServerSideProps"),j=(0,n.l)(d,"config"),m=(0,n.l)(d,"reportWebVitals"),b=(0,n.l)(d,"unstable_getStaticProps"),g=(0,n.l)(d,"unstable_getStaticPaths"),f=(0,n.l)(d,"unstable_getStaticParams"),v=(0,n.l)(d,"unstable_getServerProps"),y=(0,n.l)(d,"unstable_getServerSideProps"),P=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/newsletter/subscribers",pathname:"/newsletter/subscribers",bundlePath:"",filename:""},components:{App:c.default,Document:l.default},userland:d});a()}catch(e){a(e)}})},4611:(e,t,s)=>{s.d(t,{j:()=>a});let a="Logbase"},1070:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(997),r=s(6859);function i(){return(0,a.jsxs)(r.Html,{lang:"en",children:[(0,a.jsxs)(r.Head,{children:[a.jsx("link",{rel:"icon",href:"/images/favicon.svg"}),a.jsx("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:`
              (function(c,l,a,r,i,t,y){
                  c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                  t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                  y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
              })(window, document, "clarity", "script", "t25pdtaagd");
            `}})]}),(0,a.jsxs)("body",{children:[a.jsx(r.Main,{}),a.jsx(r.NextScript,{})]})]})}},7044:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(997),r=s(6689),i=s(968),n=s.n(i),l=s(1664),c=s.n(l),d=s(4611);function o(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[h,u]=(0,r.useState)(""),[p,x]=(0,r.useState)("all"),j=async()=>{try{let e=await fetch("/api/newsletter-recipients");if(e.ok){let s=await e.json();t(s.recipients||[])}else console.error("신청자 목록을 불러오는데 실패했습니다.")}catch(e){console.error("신청자 목록 로드 오류:",e)}finally{o(!1)}},m=async(e,t)=>{let s="active"===t?"inactive":"active";if(confirm(`이 구독자를 ${"active"===s?"활성화":"비활성화"}하시겠습니까?`))try{let t=await fetch("/api/newsletter-subscriber-update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:s})}),a=await t.json();if(t.ok)alert(a.message),await j();else throw Error(a.message||"상태 변경 중 오류가 발생했습니다.")}catch(t){let e=t instanceof Error?t.message:String(t);alert(`오류: ${e}`)}},b=async(e,t)=>{if(confirm(`'${t}' 구독자를 정말 삭제하시겠습니까?
이 작업은 되돌릴 수 없습니다.`))try{let t=await fetch("/api/newsletter-subscriber-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),s=await t.json();if(t.ok)alert(s.message),await j();else throw Error(s.message||"삭제 중 오류가 발생했습니다.")}catch(t){let e=t instanceof Error?t.message:String(t);alert(`오류: ${e}`)}};return l?(0,a.jsxs)(a.Fragment,{children:[a.jsx(n(),{children:a.jsx("title",{children:`뉴스레터 신청자 관리 - ${d.j}`})}),a.jsx("div",{className:"container",children:a.jsx("div",{className:"loading",children:"신청자 목록을 불러오는 중..."})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{children:[a.jsx("title",{children:`뉴스레터 신청자 관리 - ${d.j}`}),a.jsx("meta",{name:"description",content:"뉴스레터 신청자 관리"})]}),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"header",children:[a.jsx("h1",{children:"뉴스레터 신청자 관리"}),a.jsx("div",{children:a.jsx(c(),{href:"/newsletter",children:a.jsx("button",{type:"button",className:"btn-back","data-clarity-tag":"newsletter-subscribers-back-to-list",children:"뉴스레터 목록"})})})]}),(0,a.jsxs)("div",{className:"subscribers-stats",children:[(0,a.jsxs)("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"전체 신청자:"}),(0,a.jsxs)("span",{className:"stat-value",children:[e.length,"명"]})]}),(0,a.jsxs)("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"활성 구독자:"}),(0,a.jsxs)("span",{className:"stat-value",children:[e.filter(e=>"active"===e.status).length,"명"]})]}),(0,a.jsxs)("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"비활성 구독자:"}),(0,a.jsxs)("span",{className:"stat-value",children:[e.filter(e=>"inactive"===e.status).length,"명"]})]}),(0,a.jsxs)("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"검색 결과:"}),(0,a.jsxs)("span",{className:"stat-value",children:[s.length,"명"]})]})]}),(0,a.jsxs)("div",{className:"subscribers-controls",children:[a.jsx("div",{className:"search-group",children:a.jsx("input",{type:"text",placeholder:"이름, 이메일, 회사명으로 검색...",value:h,onChange:e=>u(e.target.value),className:"search-input","data-clarity-tag":"newsletter-subscribers-search-input"})}),a.jsx("div",{className:"filter-group",children:(0,a.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"status-filter","data-clarity-tag":"newsletter-subscribers-status-filter",children:[a.jsx("option",{value:"all",children:"전체 상태"}),a.jsx("option",{value:"active",children:"활성 구독자"}),a.jsx("option",{value:"inactive",children:"비활성 구독자"})]})}),(h||"all"!==p)&&a.jsx("button",{type:"button",className:"btn-clear-filters",onClick:()=>{u(""),x("all")},"data-clarity-tag":"newsletter-subscribers-clear-filters",children:"필터 초기화"})]}),(0,a.jsxs)("table",{children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"이름"}),a.jsx("th",{children:"이메일"}),a.jsx("th",{children:"회사/소속"}),a.jsx("th",{children:"연락처"}),a.jsx("th",{children:"신청일"}),a.jsx("th",{children:"상태"}),a.jsx("th",{style:{textAlign:"center"},children:"액션"})]})}),a.jsx("tbody",{children:s.length>0?s.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{children:e.name}),a.jsx("td",{children:e.email}),a.jsx("td",{children:e.company||"-"}),a.jsx("td",{children:e.phone||"-"}),a.jsx("td",{children:new Date(e.createdAt).toLocaleDateString("ko-KR")}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${e.status}`,children:"active"===e.status?"활성":"비활성"})}),(0,a.jsxs)("td",{className:"actions",children:[a.jsx("button",{type:"button",className:`btn-status ${"active"===e.status?"btn-deactivate":"btn-activate"}`,onClick:()=>m(e.id,e.status),"data-clarity-tag":"newsletter-subscribers-status-toggle",children:"active"===e.status?"비활성화":"활성화"}),a.jsx("button",{type:"button",className:"btn-delete-subscriber",onClick:()=>b(e.id,e.name),title:`${e.name} 삭제`,"data-clarity-tag":"newsletter-subscribers-delete",children:"삭제"})]})]},e.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,style:{textAlign:"center"},children:h||"all"!==p?"검색 결과가 없습니다.":"신청자가 없습니다."})})})]})]})]})}},5244:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},3745:e=>{e.exports=import("firebase/app")},401:e=>{e.exports=import("firebase/auth")},1492:e=>{e.exports=import("firebase/firestore")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[117,1664,6859,3893],()=>s(2477));module.exports=a})();