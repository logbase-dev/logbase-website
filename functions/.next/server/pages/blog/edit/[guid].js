(()=>{var e={};e.id=8477,e.ids=[8477,2888,660],e.modules={9851:e=>{e.exports={blogForm:"write_blogForm__IW7t6",formSection:"write_formSection__oSkK4",editorHeader:"write_editorHeader__JmhZa",editorControls:"write_editorControls__R3mB2",editorModeSwitch:"write_editorModeSwitch__eOix_",modeBtn:"write_modeBtn__skEhX",active:"write_active__rc2jd",editorActions:"write_editorActions__QAsuy",previewBtn:"write_previewBtn__An4wr",clearBtn:"write_clearBtn__QcFR_",previewContainer:"write_previewContainer__HhXW3",previewHeader:"write_previewHeader__COY5z",closePreviewBtn:"write_closePreviewBtn__6t2uE",previewContent:"write_previewContent__29htV",editorContainer:"write_editorContainer__PM8Lt",dragOver:"write_dragOver__hE5Tw",dragOverlay:"write_dragOverlay__7El2_",dragMessage:"write_dragMessage__mK5Ez",editorLoading:"write_editorLoading__AUmkj",editorLoadingContent:"write_editorLoadingContent__8wz7c",editorLoadingIcon:"write_editorLoadingIcon__Emd2g",editorLoadingText:"write_editorLoadingText__z__K3",editorLoadingProgress:"write_editorLoadingProgress__2mk4f",editorLoadingBar:"write_editorLoadingBar__Tjz97",loading:"write_loading__JbFiI",editorFooter:"write_editorFooter__jhkx1",editorStatus:"write_editorStatus__eLJ_5",statusIndicator:"write_statusIndicator__RZy8l",success:"write_success__nnVGG",modeIndicator:"write_modeIndicator__YJbRt",editorStats:"write_editorStats__BFSbQ",statItem:"write_statItem__d3oB7",draftSavedMessage:"write_draftSavedMessage__7IYTL",formActions:"write_formActions__w3DvM",formActionsLeft:"write_formActionsLeft__r1VLS",formActionsRight:"write_formActionsRight__bhaHo",draftsBtn:"write_draftsBtn__ZmauI",saveDraftBtn:"write_saveDraftBtn__RjVhF",draftsModal:"write_draftsModal__0pl2H",draftsModalContent:"write_draftsModalContent__VUzhT",draftsModalHeader:"write_draftsModalHeader__rTDul",closeModalBtn:"write_closeModalBtn__qyxsY",draftsList:"write_draftsList__k5K1F",noDrafts:"write_noDrafts__q9bty",draftItem:"write_draftItem__MZILj",draftInfo:"write_draftInfo__j_sHt",draftTitle:"write_draftTitle__B2rLF",draftMeta:"write_draftMeta__YL83x",draftActions:"write_draftActions__eGDV2",loadDraftBtn:"write_loadDraftBtn__wK_RO",deleteDraftBtn:"write_deleteDraftBtn__jEnJz",formRow:"write_formRow__iXhqG",formGroup:"write_formGroup__C_K1C",formInput:"write_formInput__TFzUz",formTextarea:"write_formTextarea__XTdUk",formSelect:"write_formSelect__EcjUo",formHelp:"write_formHelp__CRpNh",keywordInputContainer:"write_keywordInputContainer__FNcq1",keywordInput:"write_keywordInput__CTBxM",keywordTags:"write_keywordTags__lSqe0",keywordTag:"write_keywordTag__R357I",removeKeywordBtn:"write_removeKeywordBtn__Y5KNJ",errorMessage:"write_errorMessage__LFHMg",successMessage:"write_successMessage__BoWwD",editButton:"write_editButton__lY_dG"}},1376:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>_,getServerSideProps:()=>m,getStaticPaths:()=>u,getStaticProps:()=>f,reportWebVitals:()=>w,routeModule:()=>y,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>h,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>g,unstable_getStaticProps:()=>p});var i=r(7093),a=r(5244),d=r(1323),o=r(1070),n=r(3893),l=r(2370),c=e([n,l]);[n,l]=c.then?(await c)():c;let _=(0,d.l)(l,"default"),f=(0,d.l)(l,"getStaticProps"),u=(0,d.l)(l,"getStaticPaths"),m=(0,d.l)(l,"getServerSideProps"),x=(0,d.l)(l,"config"),w=(0,d.l)(l,"reportWebVitals"),p=(0,d.l)(l,"unstable_getStaticProps"),g=(0,d.l)(l,"unstable_getStaticPaths"),b=(0,d.l)(l,"unstable_getStaticParams"),j=(0,d.l)(l,"unstable_getServerProps"),h=(0,d.l)(l,"unstable_getServerSideProps"),y=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/blog/edit/[guid]",pathname:"/blog/edit/[guid]",bundlePath:"",filename:""},components:{App:n.default,Document:o.default},userland:l});s()}catch(e){s(e)}})},8864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return n},noSSR:function(){return o}});let s=r(167),i=r(997);r(6689);let a=s._(r(4830));function d(e){return{default:(null==e?void 0:e.default)||e}}function o(e,t){delete t.webpack,delete t.modules;let r=t.loading;return()=>(0,i.jsx)(r,{error:null,isLoading:!0,pastDelay:!1,timedOut:!1})}function n(e,t){let r=a.default,s={loading:e=>{let{error:t,isLoading:r,pastDelay:s}=e;return null}};e instanceof Promise?s.loader=()=>e:"function"==typeof e?s.loader=e:"object"==typeof e&&(s={...s,...e});let i=(s={...s,...t}).loader;return(s.loadableGenerated&&(s={...s,...s.loadableGenerated},delete s.loadableGenerated),"boolean"!=typeof s.ssr||s.ssr)?r({...s,loader:()=>null!=i?i().then(d):Promise.resolve(d(()=>null))}):(delete s.webpack,delete s.modules,o(r,s))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(997),i=r(6859);function a(){return(0,s.jsxs)(i.Html,{lang:"en",children:[(0,s.jsxs)(i.Head,{children:[s.jsx("link",{rel:"icon",href:"/images/favicon.svg"}),s.jsx("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:`
              (function(c,l,a,r,i,t,y){
                  c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                  t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                  y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
              })(window, document, "clarity", "script", "t25pdtaagd");
            `}})]}),(0,s.jsxs)("body",{children:[s.jsx(i.Main,{}),s.jsx(i.NextScript,{})]})]})}},2370:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>p});var i=r(997),a=r(9816),d=r.n(a),o=r(6689),n=r(1163),l=r(968),c=r.n(l),_=r(6317),f=r(5152),u=r.n(f),m=r(9851),x=r.n(m),w=e([_]);_=(w.then?(await w)():w)[0];let g=u()(()=>r.e(9056).then(r.bind(r,9056)),{loadableGenerated:{modules:["pages\\blog\\edit\\[guid].tsx -> ../EditorWithRef"]},ssr:!1});function p(){let e=(0,n.useRouter)(),{user:t}=(0,_.a)(),{guid:r}=e.query,[s,a]=(0,o.useState)({title:"",description:"",content:"",link:"",blogName:"Logbase Blog",feedType:"logbase",keywords:[],author:t?.email||""}),[l,f]=(0,o.useState)(null),[u,m]=(0,o.useState)(!0),[w,p]=(0,o.useState)(null),[b,j]=(0,o.useState)(null),[h,y]=(0,o.useState)(!1),[v,S]=(0,o.useState)(""),N=e=>{a(t=>({...t,keywords:t.keywords.filter((t,r)=>r!==e)}))},k=async t=>{t.preventDefault(),m(!0),p(null),j(null);let i=l?.getMarkdown()||"";if(!s.title.trim()){p("제목을 입력해주세요."),m(!1);return}if(!i.trim()){p("내용을 입력해주세요."),m(!1);return}try{let t=l?.getHTML().replace(/<[^>]*>/g,"").trim()||"",a=t.length>200?t.substring(0,200)+"...":t,d=await fetch(`/api/blog/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,content:i,description:a,matchedKeywords:s.keywords,categories:s.keywords})}),o=await d.json();if(o.success)j("글이 성공적으로 수정되었습니다. 잠시 후 상세 페이지로 이동합니다."),setTimeout(()=>e.push(`/blog/${o.guid||r}`),2e3);else throw Error(o.error||"글 수정에 실패했습니다.")}catch(e){p(e.message)}finally{m(!1)}},M=(0,o.useMemo)(()=>s.keywords.map((e,t)=>(0,i.jsxs)("span",{className:x().keywordTag,children:[e,i.jsx("button",{type:"button",onClick:()=>N(t),className:x().removeKeywordBtn,children:"✕"})]},t)),[s.keywords]);return t?(console.log("✏️[EDIT PAGE] 3. 렌더링 직전 상태:",{loading:u,pageError:w,success:b,formDataTitle:s.title}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c(),{children:[i.jsx("title",{className:"jsx-446d12f4d3cb794f",children:"블로그 글 수정 - Logbase"}),i.jsx("meta",{name:"robots",content:"noindex, nofollow",className:"jsx-446d12f4d3cb794f"}),i.jsx("link",{rel:"stylesheet",href:"https://uicdn.toast.com/editor/latest/toastui-editor.min.css",className:"jsx-446d12f4d3cb794f"})]}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f rss-feed-container",children:[(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f rss-header",children:[i.jsx("h1",{className:"jsx-446d12f4d3cb794f",children:"블로그 글 수정"}),i.jsx("p",{style:{textAlign:"center",margin:"10px 0",color:"#666"},className:"jsx-446d12f4d3cb794f",children:"기존 블로그 글의 내용을 수정합니다."})]}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f rss-content",children:[u&&i.jsx("div",{className:"jsx-446d12f4d3cb794f "+(x().editorLoading||""),children:i.jsx("p",{className:"jsx-446d12f4d3cb794f",children:"글 정보를 불러오는 중..."})}),(0,i.jsxs)("form",{onSubmit:k,className:"jsx-446d12f4d3cb794f "+(x().blogForm||""),children:[w&&i.jsx("div",{className:"jsx-446d12f4d3cb794f "+(x().errorMessage||""),children:w}),b&&i.jsx("div",{className:"jsx-446d12f4d3cb794f "+(x().successMessage||""),children:b}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().formSection||""),children:[i.jsx("div",{className:"jsx-446d12f4d3cb794f "+(x().editorHeader||""),children:i.jsx("h3",{className:"jsx-446d12f4d3cb794f",children:"기본 정보"})}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().formGroup||""),children:[i.jsx("label",{htmlFor:"title",className:"jsx-446d12f4d3cb794f",children:"제목 *"}),i.jsx("input",{type:"text",id:"title",name:"title",value:s.title,onChange:e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))},placeholder:"블로그 글 제목을 입력하세요",required:!0,className:"jsx-446d12f4d3cb794f "+(x().formInput||"")})]})]}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().formSection||""),children:[i.jsx("div",{className:"jsx-446d12f4d3cb794f "+(x().editorHeader||""),children:i.jsx("h3",{className:"jsx-446d12f4d3cb794f",children:"내용 작성"})}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().formGroup||""),children:[i.jsx("label",{className:"jsx-446d12f4d3cb794f",children:"내용 *"}),i.jsx("div",{className:"jsx-446d12f4d3cb794f "+(x().editorContainer||""),children:i.jsx(g,{height:"500px",initialEditType:"wysiwyg",previewStyle:"vertical",initialValue:s.content||"",onLoad:e=>{f(e),console.log("✏️[EDIT PAGE] Editor 로드 완료!"),y(!0)},onChange:()=>{l&&a(e=>({...e,content:l.getMarkdown()}))}})})]})]}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().formSection||""),children:[i.jsx("div",{className:"jsx-446d12f4d3cb794f "+(x().editorHeader||""),children:i.jsx("h3",{className:"jsx-446d12f4d3cb794f",children:"추가 설정"})}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().formGroup||""),children:[i.jsx("label",{htmlFor:"keywords",className:"jsx-446d12f4d3cb794f",children:"키워드"}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().keywordInputContainer||""),children:[i.jsx("input",{type:"text",id:"keywords",value:v,onChange:e=>S(e.target.value),onKeyDown:e=>{if("Enter"===e.key||","===e.key){e.preventDefault();let t=v.trim();t&&!s.keywords.includes(t)&&(a(e=>({...e,keywords:[...e.keywords,t]})),S(""))}},placeholder:"키워드를 입력하고 Enter 또는 쉼표를 누르세요",className:`jsx-446d12f4d3cb794f ${x().formInput} ${x().keywordInput}`}),M]})]})]}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().formActions||""),children:[i.jsx("div",{className:"jsx-446d12f4d3cb794f "+(x().formActionsLeft||"")}),(0,i.jsxs)("div",{className:"jsx-446d12f4d3cb794f "+(x().formActionsRight||""),children:[i.jsx("button",{type:"button",onClick:()=>e.back(),style:{background:"#6b7280"},disabled:u,className:"jsx-446d12f4d3cb794f migrate-btn",children:"취소"}),i.jsx("button",{type:"submit",disabled:u||!h,style:{background:u||!h?"#9ca3af":"#10b981",marginLeft:"12px"},className:"jsx-446d12f4d3cb794f migrate-btn",children:u?"수정 중...":h?"수정하기":"에디터 로딩 중..."})]})]})]})]})]}),i.jsx(d(),{id:"446d12f4d3cb794f",children:".toastui-editor-defaultUI,.toastui-editor-ww-container{border:1px solid#e5e7eb!important}.toastui-editor-defaultUI-toolbar{border-bottom:1px solid#e5e7eb!important}"})]})):(0,i.jsxs)("div",{className:"rss-feed-container",children:[i.jsx("h1",{children:"접근 권한 없음"}),i.jsx("p",{children:"글을 수정하려면 로그인이 필요합니다."})]})}s()}catch(e){s(e)}})},4830:(e,t,r)=>{"use strict";e.exports=r(7093).vendored.contexts.Loadable},5152:(e,t,r)=>{e.exports=r(8864)},5880:e=>{"use strict";e.exports=require("@toast-ui/react-editor")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9816:e=>{"use strict";e.exports=require("styled-jsx/style")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},3745:e=>{"use strict";e.exports=import("firebase/app")},401:e=>{"use strict";e.exports=import("firebase/auth")},1492:e=>{"use strict";e.exports=import("firebase/firestore")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[117,1664,6859,8342,3893],()=>r(1376));module.exports=s})();