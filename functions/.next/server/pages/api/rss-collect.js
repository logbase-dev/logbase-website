"use strict";(()=>{var e={};e.id=9756,e.ids=[9756],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3309:e=>{e.exports=require("rss-parser")},629:e=>{e.exports=require("fs/promises")},5315:e=>{e.exports=require("path")},3745:e=>{e.exports=import("firebase/app")},401:e=>{e.exports=import("firebase/auth")},1492:e=>{e.exports=import("firebase/firestore")},3392:e=>{e.exports=import("firebase/storage")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},7133:(e,t,o)=>{o.a(e,async(e,a)=>{try{o.r(t),o.d(t,{config:()=>p,default:()=>c,routeModule:()=>d});var r=o(1802),s=o(7153),l=o(6249),n=o(6097),i=e([n]);n=(i.then?(await i)():i)[0];let c=(0,l.l)(n,"default"),p=(0,l.l)(n,"config"),d=new r.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/rss-collect",pathname:"/api/rss-collect",bundlePath:"",filename:""},userland:n});a()}catch(e){a(e)}})},4810:(e,t,o)=>{o.a(e,async(e,a)=>{try{o.d(t,{I:()=>d,db:()=>p,l:()=>c});var r=o(3745),s=o(1492),l=o(401),n=e([r,s,l]);[r,s,l]=n.then?(await n)():n;let i={apiKey:"AIzaSyA6kCmSqaBH5SUPb4PkHU1hwe0l5Ppqw2w",authDomain:"logbase-blog-83db6.firebaseapp.com",projectId:"logbase-blog-83db6",storageBucket:"logbase-blog-83db6.firebasestorage.app",messagingSenderId:"938632982963",appId:"1:938632982963:web:6159f776e4466bf74bdbc6"};if(!i.apiKey||!i.projectId)throw Error("Firebase ì„¤ì •ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. .env.local íŒŒì¼ì— NEXT_PUBLIC_FIREBASE_ í™˜ê²½ ë³€ìˆ˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");let c=0===(0,r.getApps)().length?(0,r.initializeApp)(i):(0,r.getApps)()[0],p=(0,s.getFirestore)(c),d=(0,l.getAuth)(c);a()}catch(e){a(e)}})},5731:(e,t,o)=>{o.a(e,async(e,a)=>{try{o.d(t,{cx:()=>i,y7:()=>c});var r=o(3392),s=o(4810),l=e([r,s]);[r,s]=l.then?(await l)():l;let n=(0,r.getStorage)(s.l),i=async e=>{try{let t=(0,r.ref)(n,e),o=await (0,r.getDownloadURL)(t),a=await fetch(o);if(!a.ok)throw Error(`Failed to download file from storage: ${a.statusText}`);let s=await a.json();return console.log(`[Storage] âœ… Successfully read and parsed ${e}`),s}catch(t){if("storage/object-not-found"===t.code)return console.warn(`[Storage] âš ï¸ File not found at ${e}, returning empty array.`),[];throw console.error(`[Storage] âŒ Error reading JSON from ${e}:`,t),t}},c=async(e,t)=>{try{let o=(0,r.ref)(n,e),a=JSON.stringify(t,null,2);await (0,r.uploadString)(o,a,"raw",{contentType:"application/json"}),console.log(`[Storage] âœ… Successfully wrote to ${e}`)}catch(t){throw console.error(`[Storage] âŒ Error writing JSON to ${e}:`,t),t}};a()}catch(e){a(e)}})},6097:(e,t,o)=>{o.a(e,async(e,a)=>{try{o.r(t),o.d(t,{default:()=>u});var r=o(3309),s=o.n(r),l=o(4810),n=o(1492),i=o(5315),c=o.n(i),p=(o(629),o(5731)),d=e([l,n,p]);[l,n,p]=d.then?(await d)():d;let m=new(s())({customFields:{item:["content:encoded","description","summary"]},headers:{"User-Agent":"Mozilla/5.0 (compatible; RSSReader/1.0)"},timeout:1e4}),g=[];c().resolve(process.cwd(),"public/feeds.json");try{console.log("[rss-collect] Production: Reading feeds from Firebase Storage."),g=await (0,p.cx)("feeds/feeds.json"),console.log("[rss-collect] Firebase Storageì—ì„œ í”¼ë“œ ë¡œë“œ:",g.length,"ê°œ")}catch(e){console.log("[rss-collect] í”¼ë“œ ë¡œë“œ ì˜¤ë¥˜:",e),g=[{name:"avohq",url:"https://avohq.io/blog/rss",type:"competitor",status:"active"},{name:"segment",url:"https://segment.com/blog/feed.xml",type:"competitor",status:"active"},{name:"openai",url:"https://openai.com/blog/rss.xml",type:"competitor",status:"active"},{name:"pendo",url:"https://www.pendo.io/pendo-blog/feed",type:"competitor",status:"active"},{name:"mixpanel",url:"https://mixpanel.com/blog/feed",type:"competitor",status:"error"},{name:"databricks",url:"https://www.databricks.com/rss.xml",type:"competitor",status:"active"},{name:"freshpaint",url:"https://rss.app/feeds/0S6b7vLWnGFO3Pbs.xml",type:"competitor",status:"active"},{name:"amplitude",url:"https://rss.app/feeds/Ma06vfcA9qgJA3dZ.xml",type:"competitor",status:"active"},{name:"heap",url:"https://rss.app/feeds/E41H3hZEVRkAB2Xb.xml",type:"competitor",status:"active"},{name:"zeotap",url:"https://rss.app/feeds/YPWdGDZ9EeBq67VJ.xml",type:"competitor",status:"active"},{name:"avo",url:"https://rss.app/feeds/6rBLKkjuHbjxPNub.xml",type:"competitor",status:"active"},{name:"posthog",url:"https://rss.app/feeds/zfIOyXjRZwkRaEzE.xml",type:"competitor",status:"active"},{name:"logrocket",url:"https://blog.logrocket.com/feed/",type:"noncompetitor",status:"active"},{name:"otel_collector",url:"https://github.com/open-telemetry/opentelemetry-collector/releases.atom",type:"noncompetitor",status:"active"},{name:"montecarlo",url:"https://www.montecarlodata.com/feed/",type:"noncompetitor",status:"active"},{name:"montecarlo_product",url:"https://www.montecarlodata.com/category/product/feed/",type:"noncompetitor",status:"active"},{name:"towardsdatascience",url:"https://towardsdatascience.com/feed",type:"noncompetitor",status:"active"},{name:"aws_bigdata",url:"https://aws.amazon.com/blogs/big-data/feed/",type:"noncompetitor",status:"active"},{name:"snowplow",url:"https://rss.app/feeds/xxSHa2H0VG127Q4h.xml",type:"noncompetitor",status:"active"},{name:"logrocket_frontend",url:"https://rss.app/feeds/OQnZqgiK7aZqIv4B.xml",type:"noncompetitor",status:"active"},{name:"towardsdatascience_analytics",url:"https://rss.app/feeds/jHv0SqVEQUa18Eln.xml",type:"noncompetitor",status:"active"}],console.log("[rss-collect] ê¸°ë³¸ í•˜ë“œì½”ë”© í”¼ë“œ ì‚¬ìš©")}let h=[];c().resolve(process.cwd(),"public/keywords.json");try{console.log("[rss-collect] Production: Reading keywords from Firebase Storage."),h=await (0,p.cx)("keywords/keywords.json"),console.log("[rss-collect] Firebase Storageì—ì„œ í‚¤ì›Œë“œ ë¡œë“œ:",h.length,"ê°œ")}catch(e){console.error("[rss-collect] í‚¤ì›Œë“œ ë¡œë“œ ì˜¤ë¥˜:",e),h=["behavioral data","event log","event data","analytics data","observability","log validation","log enrichment","user journey data","journey data","journey log","journey tracking","mobile tracking","no code tracking","user event stream","behavioral analytics","event instrumentation","AI behavior modeling","predictive behavior analytics","user journey AI","customer behavior AI","data observability","data contract validation","automated logging","analytics event QA","data reliability","A/B test","data metric","product analytics","Machine learning in Analytics","LLM in analytics","Behavioral Segmentation"],console.log("[rss-collect] ê¸°ë³¸ í•˜ë“œì½”ë”© í‚¤ì›Œë“œ ì‚¬ìš©")}async function u(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});let o=new Date;console.log(`ðŸš€ RSS í”¼ë“œ ìˆ˜ì§‘ ì‹œìž‘: ${o.toLocaleString("ko-KR")}`);let a=[],r=0,s=0;for(let e of g){if("error"===e.status){console.log(`â­ï¸ ê±´ë„ˆë›°ê¸°: ${e.name} (ì—ëŸ¬ ìƒíƒœ, ${e.type})`);continue}try{let t=await fetch(e.url),o=await t.text();o=(o=o.replace(/&(?!amp;|lt;|gt;|quot;|apos;|#\d+;|#x[a-fA-F0-9]+;)/g,"&amp;")).replace(/&(?![a-zA-Z0-9#]+;)/g,"&amp;");let s=await m.parseString(o);s.items.forEach(t=>{if(t.title&&t.link&&t.pubDate){let o={...t,title:t.title,link:t.link,pubDate:t.pubDate,blogName:e.name,feedType:e.type};a.push(o)}}),r++,console.log(`âœ… RSS íŒŒì‹± ì„±ê³µ: ${e.name} (${s.items.length}ê°œ ê¸€, ${e.type})`)}catch(t){console.error(`âŒ RSS íŒŒì‹± ì—ëŸ¬: ${e.name} (${e.type}) - ${e.url}`,t),s++}await new Promise(e=>setTimeout(e,200))}let i=a.filter(e=>"competitor"===e.feedType),c=a.filter(e=>"noncompetitor"===e.feedType);i.forEach(e=>{let t=(e.title+" "+(e.content||"")+" "+(e.summary||"")).toLowerCase(),o=h.filter(e=>t.includes(e.toLowerCase()));e.matchedKeywords=o});let p=c.map(e=>{let t=(e.title+" "+(e.content||"")+" "+(e.summary||"")).toLowerCase(),o=h.filter(e=>t.includes(e.toLowerCase()));return e.matchedKeywords=o,e}).filter(e=>e.matchedKeywords&&e.matchedKeywords.length>0),d=[...i,...p],u=new Date,f=new Date(u.getFullYear(),u.getMonth(),u.getDate()-1,0,0,0,0),y=new Date(u.getFullYear(),u.getMonth(),u.getDate()-1,23,59,59,999),w=(0,n.collection)(l.db,"rss_items"),b=new Date().toISOString().slice(0,10),v=0,S=new Set;try{let e=(0,n.query)(w,(0,n.where)("collectedDate","==",b)),t=await (0,n.getDocs)(e);v=t.size,t.docs.forEach(e=>{let t=e.data(),o=`${t.title}_${t.blogName}`;S.add(o)}),console.log(`[rss-collect] ì˜¤ëŠ˜(${b}) ìˆ˜ì§‘ëœ ë¬¸ì„œ ê°œìˆ˜:`,v),console.log(`[rss-collect] ì¤‘ë³µ ì²´í¬ìš© í‚¤ ê°œìˆ˜:`,S.size)}catch(e){console.log("[rss-collect] ì˜¤ëŠ˜ ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜:",e)}let A=d.filter(e=>{if(!e.pubDate)return!1;let t=new Date(e.pubDate);return t>=f&&t<=y}).sort((e,t)=>new Date(t.pubDate).getTime()-new Date(e.pubDate).getTime());console.log(`ðŸ“Š ì „ì²´ ${a.length}ê°œ ê¸€ ì¤‘ ê²½ìŸì‚¬ ${i.length}ê°œ, ë¹„ê²½ìŸì‚¬ í‚¤ì›Œë“œ í•„í„°ë§ í›„ ${p.length}ê°œ, ì´ ${d.length}ê°œ, ì–´ì œ ë‚ ì§œ í•„í„°ë§ í›„ ${A.length}ê°œ`);let x=0,P=0;for(let e of A){try{let t=`${e.title}_${e.blogName}`;if(S.has(t)){P++;continue}let o={...e,createdAt:new Date,updatedAt:new Date,collectedDate:b,news_letter_sent_date:null};await (0,n.addDoc)(w,o),x++,S.add(t),x%10==0&&console.log(`[rss-collect] ${x}ê°œ ë¬¸ì„œ ì €ìž¥ ì™„ë£Œ`)}catch(e){x%10==0&&console.error("âŒ Firestore ì €ìž¥ ì—ëŸ¬:",e)}x%5==0&&await new Promise(e=>setTimeout(e,100))}let $={totalFeeds:g.filter(e=>"active"===e.status).length,successfulFeeds:r,failedFeeds:s,totalArticles:a.length,competitorArticles:i.length,nonCompetitorFilteredArticles:p.length,totalFilteredArticles:d.length,savedArticles:x,skippedArticles:P,filteredByDateArticles:A.length,message:x>0?`RSS ìµœì‹ ê¸€ ${x}ê°œê°€ Firestoreì— ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤! (ì¤‘ë³µ ì œì™¸: ${P}ê°œ, ê²½ìŸì‚¬: í‚¤ì›Œë“œ í•„í„° ì—†ìŒ, ë¹„ê²½ìŸì‚¬: í‚¤ì›Œë“œ í•„í„° ì ìš©)`:`í‚¤ì›Œë“œì— ë§žëŠ” ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. (ì „ì²´ ${a.length}ê°œ ê¸€ ì¤‘ ê²½ìŸì‚¬ ${i.length}ê°œ, ë¹„ê²½ìŸì‚¬ í•„í„°ë§ ${p.length}ê°œ)`},D=new Date,k=D.getTime()-o.getTime(),E=Math.round(k/1e3);console.log(`ðŸ RSS í”¼ë“œ ìˆ˜ì§‘ ì™„ë£Œ: ${D.toLocaleString("ko-KR")}`),console.log(`â±ï¸ ì´ ì†Œìš” ì‹œê°„: ${E}ì´ˆ (${Math.round(k)}ms)`),console.log("\uD83D\uDCCB ìµœì¢… ê²°ê³¼:",$);let j={...$,startTime:o.toISOString(),endTime:D.toISOString(),durationSeconds:E,durationMs:k};t.status(200).json(j)}a()}catch(e){a(e)}},1)},7153:(e,t)=>{var o;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},1802:(e,t,o)=>{e.exports=o(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=7133);module.exports=o})();