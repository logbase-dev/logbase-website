"use strict";(()=>{var e={};e.id=8604,e.ids=[8604],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},4773:(e,t,s)=>{s.r(t),s.d(t,{config:()=>u,default:()=>c,routeModule:()=>d});var o={};s.r(o),s.d(o,{default:()=>a});var r=s(1802),n=s(7153),i=s(6249),l=s(5980);async function a(e,t){if(console.log("\uD83D\uDCC5 Newsletter Date API í˜¸ì¶œë¨:",{method:e.method,body:e.body}),"POST"!==e.method)return console.log("âŒ Method not allowed:",e.method),t.status(405).json({message:"Method not allowed"});try{let{guid:s,news_letter_sent_date:o}=e.body;if(console.log("\uD83D\uDCDD ë°›ì€ ë°ì´í„°:",{guid:s,news_letter_sent_date:o}),!s||"string"!=typeof s)return console.log("âŒ GUIDê°€ ì—†ê±°ë‚˜ ìž˜ëª»ëœ í˜•ì‹:",s),t.status(400).json({success:!1,message:"GUIDëŠ” í•„ìˆ˜ í•­ëª©ì´ë©° ë¬¸ìžì—´ì´ì–´ì•¼ í•©ë‹ˆë‹¤."});let r=s.trim();if(!r)return console.log("âŒ GUIDê°€ ë¹ˆ ë¬¸ìžì—´ìž…ë‹ˆë‹¤."),t.status(400).json({success:!1,message:"GUIDëŠ” ë¹ˆ ë¬¸ìžì—´ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."});if(!o)return console.log("âŒ ë‰´ìŠ¤ë ˆí„° ë°œì†¡ì¼ì´ ì—†ìŒ"),t.status(400).json({success:!1,message:"ë‰´ìŠ¤ë ˆí„° ë°œì†¡ì¼ì€ í•„ìˆ˜ í•­ëª©ìž…ë‹ˆë‹¤."});console.log(`ðŸ“… ë‰´ìŠ¤ë ˆí„° ë°œì†¡ì¼ ì—…ë°ì´íŠ¸ ìš”ì²­: ${r} -> ${o}`);let n=Buffer.from(r).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");console.log(`ðŸ” ì¸ì½”ë”©ëœ GUID: ${n}`);let i=l.iW.collection("rss_items").doc(n),a=await i.get();if(a.exists||r.includes("/")?a.exists||console.log(`- ì¸ì½”ë”©ëœ GUID(${n})ë¡œ ë¬¸ì„œë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. URL í˜•íƒœ GUIDëŠ” ì§ì ‘ doc() í˜¸ì¶œì„ ê±´ë„ˆëœë‹ˆë‹¤.`):(console.log(`- ì¸ì½”ë”©ëœ GUID(${n})ë¡œ ë¬¸ì„œë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì›ë³¸ GUIDë¡œ ìž¬ì‹œë„í•©ë‹ˆë‹¤.`),i=l.iW.collection("rss_items").doc(r),a=await i.get()),!a.exists){console.log(`- ì›ë³¸ GUID(${r})ë¡œë„ ë¬¸ì„œë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. guid í•„ë“œë¡œ ê²€ìƒ‰ ì‹œë„...`);let e=await l.iW.collection("rss_items").where("guid","==",r).limit(1).get();if(e.empty)return console.log(`âŒ guid í•„ë“œë¡œë„ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${r}`),t.status(404).json({success:!1,message:"í•´ë‹¹ RSS ì•„ì´í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."});let s=e.docs[0];i=s.ref,console.log(`âœ… guid í•„ë“œë¡œ ë¬¸ì„œ ë°œê²¬: ${s.id}`)}return await i.update({news_letter_sent_date:o,updatedAt:new Date}),console.log(`âœ… ë‰´ìŠ¤ë ˆí„° ë°œì†¡ì¼ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${i.id} (guid: ${r}) -> ${o}`),t.status(200).json({success:!0,message:"ë‰´ìŠ¤ë ˆí„° ë°œì†¡ì¼ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.",data:{guid:r,news_letter_sent_date:o}})}catch(e){return console.error("âŒ ë‰´ìŠ¤ë ˆí„° ë°œì†¡ì¼ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:",e),console.error("âŒ ì˜¤ë¥˜ ìŠ¤íƒ:",e instanceof Error?e.stack:e),t.status(500).json({success:!1,message:"ë‰´ìŠ¤ë ˆí„° ë°œì†¡ì¼ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",error:e instanceof Error?e.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"})}}let c=(0,i.l)(o,"default"),u=(0,i.l)(o,"config"),d=new r.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/rss-migrate/newsletter-date",pathname:"/api/rss-migrate/newsletter-date",bundlePath:"",filename:""},userland:o})},5980:(e,t,s)=>{s.d(t,{Hf:()=>i,iW:()=>n});let o=require("firebase-admin");var r=s.n(o);!function(){if(r().apps.length>0)return r().app();let e={projectId:process.env.FIREBASE_ADMIN_PROJECT_ID,privateKey:process.env.FIREBASE_ADMIN_PRIVATE_KEY?.replace(/\\n/g,"\n"),clientEmail:process.env.FIREBASE_ADMIN_CLIENT_EMAIL},t=process.env.FIREBASE_STORAGE_EMULATOR_HOST?"logbase-blog-83db6.appspot.com":"logbase-blog-83db6.firebasestorage.app";e.privateKey?r().initializeApp({credential:r().credential.cert(e),storageBucket:t}):(console.warn("Firebase Admin private key is not set. Using default credentials."),r().initializeApp({projectId:process.env.FIREBASE_ADMIN_PROJECT_ID||"logbase-blog-83db6",storageBucket:t}))}();let n=r().firestore(),i=r().storage().bucket(),l=process.env.FIRESTORE_EMULATOR_HOST,a=process.env.FIREBASE_STORAGE_EMULATOR_HOST;l&&(console.log(`âœ… [Admin SDK] Firestore Emulator ì—°ê²°: ${l}`),console.log("   í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ìžë™ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.")),a&&(console.log(`âœ… [Admin SDK] Storage Emulator ì„¤ì •: ${a}`),console.log("   í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ìžë™ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤."))},7153:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},1802:(e,t,s)=>{e.exports=s(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var s=t(t.s=4773);module.exports=s})();