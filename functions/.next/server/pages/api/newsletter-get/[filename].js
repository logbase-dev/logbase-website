"use strict";(()=>{var e={};e.id=8510,e.ids=[8510],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},629:e=>{e.exports=require("fs/promises")},5315:e=>{e.exports=require("path")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},59:(e,t,s)=>{s.r(t),s.d(t,{config:()=>g,default:()=>f,routeModule:()=>T});var o={};s.r(o),s.d(o,{default:()=>d});var r=s(1802),n=s(7153),l=s(6249),i=s(629),a=s.n(i),E=s(5315),c=s.n(E),u=s(5980);async function p(){let e;if(process.env.FIREBASE_CONFIG||process.env.FUNCTION_TARGET){console.log("[NEWSLETTER-GET] Firebase Functions 환경에서 Cloud Storage 사용");let t=u.Hf.file("newsletters/newsletters.json"),[s]=await t.exists();if(!s)throw console.log("[NEWSLETTER-GET] Cloud Storage에 newsletters.json 파일이 없습니다."),Error("Newsletter list not found");let[o]=await t.download();e=o.toString("utf-8"),console.log(`[NEWSLETTER-GET] Cloud Storage에서 뉴스레터 로드 완료`)}else{console.log("[NEWSLETTER-GET] 로컬 환경에서 로컬 파일 사용");let t=c().resolve(process.cwd(),"public/newsletters"),s=c().join(t,"newsletters.json");e=await a().readFile(s,"utf-8"),console.log(`[NEWSLETTER-GET] 로컬 파일에서 뉴스레터 로드 완료`)}let t=JSON.parse(e);return Array.isArray(t)?t:[]}async function d(e,t){if("GET"!==e.method)return t.status(405).json({message:"Method not allowed"});try{let{filename:s}=e.query;if(!s||"string"!=typeof s)return t.status(400).json({success:!1,message:"파일명이 필요합니다."});let o=await p();console.log(`[NEWSLETTER-GET] 총 ${o.length}개의 뉴스레터 로드됨`);let r=o.find(e=>e.filename===s);if(!r)return console.log(`[NEWSLETTER-GET] 뉴스레터를 찾을 수 없음: ${s}`),t.status(404).json({success:!1,message:"뉴스레터를 찾을 수 없습니다."});return console.log(`[NEWSLETTER-GET] 뉴스레터 찾음: ${s}`),t.status(200).json({success:!0,newsletter:r})}catch(e){if(console.error("[NEWSLETTER-GET] 뉴스레터 조회 중 오류:",e),e instanceof Error&&"Newsletter list not found"===e.message)return t.status(404).json({success:!1,message:"뉴스레터 목록을 찾을 수 없습니다."});return t.status(500).json({success:!1,message:"뉴스레터 조회에 실패했습니다.",error:e instanceof Error?e.message:"알 수 없는 오류"})}}let f=(0,l.l)(o,"default"),g=(0,l.l)(o,"config"),T=new r.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/newsletter-get/[filename]",pathname:"/api/newsletter-get/[filename]",bundlePath:"",filename:""},userland:o})},5980:(e,t,s)=>{s.d(t,{Hf:()=>l,iW:()=>n});let o=require("firebase-admin");var r=s.n(o);!function(){if(r().apps.length>0)return r().app();let e={projectId:process.env.FIREBASE_ADMIN_PROJECT_ID,privateKey:process.env.FIREBASE_ADMIN_PRIVATE_KEY?.replace(/\\n/g,"\n"),clientEmail:process.env.FIREBASE_ADMIN_CLIENT_EMAIL},t=process.env.FIREBASE_STORAGE_EMULATOR_HOST?"logbase-blog-83db6.appspot.com":"logbase-blog-83db6.firebasestorage.app";e.privateKey?r().initializeApp({credential:r().credential.cert(e),storageBucket:t}):(console.warn("Firebase Admin private key is not set. Using default credentials."),r().initializeApp({projectId:process.env.FIREBASE_ADMIN_PROJECT_ID||"logbase-blog-83db6",storageBucket:t}))}();let n=r().firestore(),l=r().storage().bucket(),i=process.env.FIRESTORE_EMULATOR_HOST,a=process.env.FIREBASE_STORAGE_EMULATOR_HOST;i&&(console.log(`✅ [Admin SDK] Firestore Emulator 연결: ${i}`),console.log("   환경 변수를 통해 자동 연결되었습니다.")),a&&(console.log(`✅ [Admin SDK] Storage Emulator 설정: ${a}`),console.log("   환경 변수를 통해 자동 연결되었습니다."))},7153:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},1802:(e,t,s)=>{e.exports=s(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var s=t(t.s=59);module.exports=s})();