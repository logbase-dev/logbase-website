"use strict";(()=>{var e={};e.id=4169,e.ids=[4169,2888,660],e.modules={6578:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>m,default:()=>u,getServerSideProps:()=>h,getStaticPaths:()=>g,getStaticProps:()=>p,reportWebVitals:()=>x,routeModule:()=>v,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>y});var r=s(7093),l=s(5244),n=s(1323),i=s(1070),o=s(3893),d=s(1397),c=e([o,d]);[o,d]=c.then?(await c)():c;let u=(0,n.l)(d,"default"),p=(0,n.l)(d,"getStaticProps"),g=(0,n.l)(d,"getStaticPaths"),h=(0,n.l)(d,"getServerSideProps"),m=(0,n.l)(d,"config"),x=(0,n.l)(d,"reportWebVitals"),y=(0,n.l)(d,"unstable_getStaticProps"),f=(0,n.l)(d,"unstable_getStaticPaths"),j=(0,n.l)(d,"unstable_getStaticParams"),b=(0,n.l)(d,"unstable_getServerProps"),S=(0,n.l)(d,"unstable_getServerSideProps"),v=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/rss-feed",pathname:"/rss-feed",bundlePath:"",filename:""},components:{App:o.default,Document:i.default},userland:d});a()}catch(e){a(e)}})},4611:(e,t,s)=>{s.d(t,{j:()=>a});let a="Logbase"},1070:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(997),r=s(6859);function l(){return(0,a.jsxs)(r.Html,{lang:"en",children:[(0,a.jsxs)(r.Head,{children:[a.jsx("link",{rel:"icon",href:"/images/favicon.svg"}),a.jsx("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:`
              (function(c,l,a,r,i,t,y){
                  c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                  t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                  y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
              })(window, document, "clarity", "script", "t25pdtaagd");
            `}})]}),(0,a.jsxs)("body",{children:[a.jsx(r.Main,{}),a.jsx(r.NextScript,{})]})]})}},1397:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>p});var r=s(997),l=s(6689),n=s(968),i=s.n(n),o=s(1163),d=s(4611),c=s(6317),u=e([c]);function p(){let{user:e}=(0,c.a)(),t=(0,o.useRouter)(),[s,a]=(0,l.useState)([]),[n,u]=(0,l.useState)(!0),[p,g]=(0,l.useState)(null),[h,m]=(0,l.useState)("all"),[x,y]=(0,l.useState)(!1),[f,j]=(0,l.useState)(1),[b,S]=(0,l.useState)(12),[v,w]=(0,l.useState)(0),[N,k]=(0,l.useState)({}),[C,D]=(0,l.useState)({}),[T,R]=(0,l.useState)({}),[E,P]=(0,l.useState)({}),[$,A]=(0,l.useState)(""),[_,L]=(0,l.useState)("all"),[K,O]=(0,l.useState)(0),[q,U]=(0,l.useState)({}),[F,I]=(0,l.useState)({}),[J,M]=(0,l.useState)(!1),[z,H]=(0,l.useState)("card"),[G,W]=(0,l.useState)([]),[B,V]=(0,l.useState)(!1),[Z,X]=(0,l.useState)(""),[Q,Y]=(0,l.useState)(null),[ee,et]=(0,l.useState)(""),[es,ea]=(0,l.useState)(null),[er,el]=(0,l.useState)(null),[en,ei]=(0,l.useState)([]),[eo,ed]=(0,l.useState)(!1),[ec,eu]=(0,l.useState)(!1),[ep,eg]=(0,l.useState)({name:"",url:"",type:"noncompetitor",status:"active"}),[eh,em]=(0,l.useState)(null),[ex,ey]=(0,l.useState)({name:"",url:"",type:"noncompetitor",status:"active"}),[ef,ej]=(0,l.useState)(null),[eb,eS]=(0,l.useState)(null),[ev,ew]=(0,l.useState)(void 0),[eN,ek]=(0,l.useState)(0),eC=()=>"/api/rss-migrate",eD=async(e,t=1,s=12,r,l)=>{try{u(!0),g(null),console.log("\uD83D\uDD04 RSS 데이터 로딩 시작:",{blogName:e,page:t,pageSize:s,feedTypeParam:r,searchTextParam:l});let n=new URLSearchParams;e&&"all"!==e&&n.append("blogName",e),n.append("page",String(t)),n.append("pageSize",String(s)),r&&"all"!==r&&n.append("feedType",r),l&&n.append("searchText",l);let i=eC(),o=`${i}?${n}`;console.log("\uD83D\uDCE1 API 요청 URL:",o,"(환경:","production",")");let d=await fetch(o);if(console.log("\uD83D\uDCE1 API 응답 상태:",d.status,d.statusText),!d.ok)throw Error(`HTTP error! status: ${d.status}`);let c=await d.json();console.log("\uD83D\uDCE1 API 응답 데이터:",c),c.success?(a(c.data||[]),w(c.totalCount||0),ew(c.filteredCount),ek(c.totalPages||Math.ceil((c.filteredCount||c.totalCount)/s)),console.log("✅ RSS 데이터 로딩 완료:",{itemsCount:c.data?.length||0,totalCount:c.totalCount||0,filteredCount:c.filteredCount})):(console.error("❌ API 응답 에러:",c.error),g(c.error||"데이터를 불러오는 중 오류가 발생했습니다."))}catch(e){console.error("❌ RSS 데이터 로딩 에러:",e),g("RSS 데이터를 불러오는 중 오류가 발생했습니다.")}finally{u(!1)}},eT=e=>{j(e),eD("all"===h?void 0:h,e,b,_,$)},eR=e=>{S(e),j(1),eD("all"===h?void 0:h,1,e,_,$)},eE=async e=>{let t=N[e]?.trim();if(!t)return;let a=t.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(0===a.length)return;R(t=>({...t,[e]:!0}));let r=s.find(t=>t.guid===e),l=C[e]||r?.matchedKeywords||[],n=Array.isArray(l)?l:[];console.log("\uD83D\uDD0D 기존 키워드 확인:",{guid:e,existing:l,existingArray:n,newKeywords:a});let i=Array.from(new Set([...n,...a]));try{console.log("\uD83D\uDD27 키워드 저장 시작:",{guid:e,matchedKeywords:i});let t=new AbortController,s=setTimeout(()=>t.abort(),3e4),a=await fetch("/api/rss-migrate/keywords",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({guid:e,matchedKeywords:i}),signal:t.signal});if(clearTimeout(s),console.log("\uD83D\uDCE1 키워드 저장 응답 상태:",a.status,a.statusText),!a.ok)throw Error(`HTTP error! status: ${a.status}`);let r=await a.json();console.log("\uD83D\uDCE1 키워드 저장 응답:",r),r.success?(D(t=>({...t,[e]:i})),k(t=>({...t,[e]:""})),console.log("✅ 키워드 저장 성공:",e)):(console.error("❌ 키워드 저장 실패:",r.error),alert("키워드 저장 실패: "+r.error))}catch(e){if(console.error("❌ 키워드 저장 중 오류:",e),e instanceof Error&&"AbortError"===e.name)alert("키워드 저장 시간 초과 (30초). 다시 시도해주세요.");else{let t=e instanceof Error?e.message:"알 수 없는 오류";alert("키워드 저장 중 오류 발생: "+t)}}finally{R(t=>({...t,[e]:!1}))}},eP=async(e,t)=>{if(!window.confirm(`키워드 "${t}"을(를) 삭제하시겠습니까?`))return;let a=s.find(t=>t.guid===e),r=C[e]||a?.matchedKeywords||[],l=Array.isArray(r)?r:[];console.log("\uD83D\uDD0D 키워드 삭제 - 기존 키워드 확인:",{guid:e,existing:r,existingArray:l,keyword:t});let n=l.filter(e=>e!==t);R(t=>({...t,[e]:!0}));try{console.log("\uD83D\uDD27 키워드 삭제 시작:",{guid:e,keyword:t,matchedKeywords:n});let s=new AbortController,a=setTimeout(()=>s.abort(),3e4),r=await fetch("/api/rss-migrate/keywords",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({guid:e,matchedKeywords:n}),signal:s.signal});if(clearTimeout(a),console.log("\uD83D\uDCE1 키워드 삭제 응답 상태:",r.status,r.statusText),!r.ok)throw Error(`HTTP error! status: ${r.status}`);let l=await r.json();console.log("\uD83D\uDCE1 키워드 삭제 응답:",l),l.success?(D(t=>({...t,[e]:n})),console.log("✅ 키워드 삭제 성공:",e,t)):(console.error("❌ 키워드 삭제 실패:",l.error),alert("키워드 삭제 실패: "+l.error))}catch(e){if(console.error("❌ 키워드 삭제 중 오류:",e),e instanceof Error&&"AbortError"===e.name)alert("키워드 삭제 시간 초과 (30초). 다시 시도해주세요.");else{let t=e instanceof Error?e.message:"알 수 없는 오류";alert("키워드 삭제 중 오류 발생: "+t)}}finally{R(t=>({...t,[e]:!1}))}},e$=async e=>{if(window.confirm("이 글을 삭제하시겠습니까?")){if(!e||"string"!=typeof e||!e.trim()){alert("유효하지 않은 글 ID입니다.");return}P(t=>({...t,[e]:!0}));try{console.log("\uD83D\uDDD1️ 글 삭제 요청:",{guid:e});let t=await fetch("/api/rss-migrate/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:e.trim()})});console.log("\uD83D\uDCE1 삭제 응답 상태:",t.status,t.statusText);let s=await t.json();console.log("\uD83D\uDCE1 삭제 응답 데이터:",s),s.success?(a(t=>t.filter(t=>t.guid!==e)),D(t=>{let s={...t};return delete s[e],s}),alert("글이 삭제되었습니다.")):(console.error("❌ 글 삭제 실패:",s),alert("글 삭제 실패: "+(s.message||s.error||"알 수 없는 오류")))}catch(t){console.error("❌ 글 삭제 중 오류:",t);let e=t instanceof Error?t.message:"알 수 없는 오류";alert("글 삭제 중 오류 발생: "+e)}finally{P(t=>({...t,[e]:!1}))}}},eA=e=>{L(e),j(1),eD(h,1,b,e,$)};Array.from(new Set(s.map(e=>e.blogName))).sort().filter(e=>{let t=!$||e.toLowerCase().includes($.toLowerCase());if("all"===_)return t;let a=s.find(t=>t.blogName===e)?.feedType===_;return t&&a});let e_=()=>{j(1),eD("all"===h?void 0:h,1,b,_,$)},eL=e=>{let t=new Date(e),s=t.toLocaleString("ko-KR",{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),a=t.toLocaleString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return`${s} GMT / ${a} KST`},eK=async()=>{if(!Z.trim()){ea("키워드를 입력해주세요.");return}try{V(!0),ea(null);let e=await fetch("/api/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:Z.trim()})}),t=await e.json();t.success?(W(t.keywords),X(""),el("키워드가 추가되었습니다."),setTimeout(()=>el(null),3e3)):ea(t.error)}catch(e){ea("키워드 추가 중 오류가 발생했습니다.")}finally{V(!1)}},eO=e=>{Y(e),et(e)},eq=async()=>{if(!Q||!ee.trim()){ea("키워드를 입력해주세요.");return}try{V(!0),ea(null);let e=await fetch("/api/keywords",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldKeyword:Q,newKeyword:ee.trim()})}),t=await e.json();t.success?(W(t.keywords),Y(null),et(""),el("키워드가 수정되었습니다."),setTimeout(()=>el(null),3e3)):ea(t.error)}catch(e){ea("키워드 수정 중 오류가 발생했습니다.")}finally{V(!1)}},eU=async e=>{if(window.confirm(`키워드 "${e}"을(를) 삭제하시겠습니까?`))try{V(!0),ea(null);let t=await fetch("/api/keywords",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:e})}),s=await t.json();s.success?(W(s.keywords),el("키워드가 삭제되었습니다."),setTimeout(()=>el(null),3e3)):ea(s.error)}catch(e){ea("키워드 삭제 중 오류가 발생했습니다.")}finally{V(!1)}},eF=async()=>{if(!ep.name.trim()||!ep.url.trim()){ej("피드 이름과 URL을 입력해주세요.");return}ed(!0),ej(null),eS(null);try{let e=await fetch("/api/feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ep)}),t=await e.json();t.success?(ei(t.feeds),eS("RSS 피드가 추가되었습니다."),eg({name:"",url:"",type:"noncompetitor",status:"active"})):ej(t.error||"RSS 피드 추가 중 오류가 발생했습니다.")}catch(e){ej("RSS 피드 추가 중 오류가 발생했습니다.")}finally{ed(!1)}},eI=e=>{em(e),ey({...e})},eJ=async()=>{if(!eh){ej("수정할 피드가 선택되지 않았습니다.");return}if(!ex.name.trim()||!ex.url.trim()){ej("피드 이름과 URL을 입력해주세요.");return}ed(!0),ej(null),eS(null);try{let e=await fetch("/api/feeds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:eh.name,...ex})}),t=await e.json();t.success?(ei(t.feeds),eS("RSS 피드가 수정되었습니다."),em(null),ey({name:"",url:"",type:"noncompetitor",status:"active"})):ej(t.error||"RSS 피드 수정 중 오류가 발생했습니다.")}catch(e){ej("RSS 피드 수정 중 오류가 발생했습니다.")}finally{ed(!1)}},eM=async e=>{if(window.confirm(`RSS 피드 "${e.name}"을(를) 삭제하시겠습니까?`)){ed(!0),ej(null),eS(null);try{let t=await fetch("/api/feeds",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name})}),s=await t.json();s.success?(ei(s.feeds),eS("RSS 피드가 삭제되었습니다.")):ej(s.error||"RSS 피드 삭제 중 오류가 발생했습니다.")}catch(e){ej("RSS 피드 삭제 중 오류가 발생했습니다.")}finally{ed(!1)}}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[r.jsx("title",{children:`DATA INSIGHTS - ${d.j}`}),r.jsx("meta",{name:"description",content:"RSS 피드 관리 및 뉴스레터 서비스"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("link",{rel:"icon",href:"/favicon.svg"})]}),(0,r.jsxs)("div",{className:"rss-feed-container",children:[(0,r.jsxs)("div",{className:"rss-header",children:[r.jsx("h1",{children:"DATA INSIGHTS"}),(0,r.jsxs)("div",{className:"rss-controls",style:{justifyContent:"center"},children:[r.jsx("input",{type:"text",value:$,onChange:e=>A(e.target.value),onKeyDown:e=>{"Enter"===e.key&&e_()},placeholder:"블로그명, 제목, 내용 검색",className:"blog-search-input"}),(0,r.jsxs)("select",{value:_,onChange:e=>eA(e.target.value),className:"blog-filter",children:[r.jsx("option",{value:"all",children:"전체"}),r.jsx("option",{value:"competitor",children:"경쟁사"}),r.jsx("option",{value:"noncompetitor",children:"비경쟁사"})]}),r.jsx("button",{type:"button",onClick:e_,className:"migrate-btn","data-clarity-tag":"rss-feed-search-button",children:"검색"}),$&&r.jsx("button",{type:"button",onClick:()=>{A(""),eD(h,1,b,_,"")},className:"migrate-btn",style:{background:"#ef4444",marginLeft:"8px"},"data-clarity-tag":"rss-feed-search-reset-button",children:"초기화"})]}),r.jsx("br",{}),e&&(0,r.jsxs)("div",{className:"rss-controls",style:{justifyContent:"center"},children:[r.jsx("button",{type:"button",onClick:()=>M(!J),className:"migrate-btn",style:{background:J?"#ef4444":"#10b981"},"data-clarity-tag":"rss-feed-keyword-manager-toggle",children:J?"RSS 수집 키워드 관리 닫기":"RSS 수집 키워드 관리"}),r.jsx("button",{type:"button",onClick:()=>eu(!ec),className:"migrate-btn",style:{background:ec?"#ef4444":"#3b82f6"},"data-clarity-tag":"rss-feed-feed-manager-toggle",children:ec?"RSS FEED URL 관리 닫기":"RSS FEED URL 관리"})]})]}),J&&(0,r.jsxs)("div",{className:"keyword-manager-section",children:[(0,r.jsxs)("div",{className:"keyword-manager-header",children:[r.jsx("h3",{children:"RSS 수집용 키워드 관리"}),r.jsx("button",{onClick:()=>M(!1),className:"close-btn","data-clarity-tag":"rss-feed-keyword-manager-close",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"info-box",children:[r.jsx("strong",{children:"설명:"})," 이 키워드들은 RSS 피드 수집 시 필터링에 사용됩니다. 경쟁사 블로그의 모든 글은 자동으로 수집되고, 비경쟁사 블로그는 이 키워드가 포함된 글만 수집됩니다."]}),es&&r.jsx("div",{className:"error-message",children:es}),er&&r.jsx("div",{className:"success-message",children:er}),(0,r.jsxs)("div",{className:"add-keyword-section",children:[r.jsx("h4",{children:"새 키워드 추가"}),(0,r.jsxs)("div",{className:"keyword-input-group",children:[r.jsx("input",{type:"text",value:Z,onChange:e=>X(e.target.value),onKeyDown:e=>"Enter"===e.key&&eK(),placeholder:"새 키워드를 입력하세요",disabled:B}),r.jsx("button",{onClick:eK,disabled:B||!Z.trim(),className:"add-btn","data-clarity-tag":"rss-feed-keyword-add-button",children:B?"추가 중...":"추가"})]})]}),(0,r.jsxs)("div",{className:"keyword-list-section",children:[(0,r.jsxs)("h4",{children:["현재 키워드 목록 (",G.length,"개)"]}),B&&0===G.length?r.jsx("div",{className:"loading-message",children:"키워드를 불러오는 중..."}):0===G.length?r.jsx("div",{className:"empty-message",children:"등록된 키워드가 없습니다."}):r.jsx("div",{className:"keyword-grid",children:G.map((e,t)=>r.jsx("div",{className:"keyword-item",children:Q===e?(0,r.jsxs)("div",{className:"keyword-edit-group",children:[r.jsx("input",{type:"text",value:ee,onChange:e=>et(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eq(),"Escape"===e.key&&(Y(null),et(""))},autoFocus:!0}),r.jsx("button",{onClick:eq,disabled:B,className:"save-btn",children:"저장"}),r.jsx("button",{onClick:()=>{Y(null),et("")},disabled:B,className:"cancel-btn",children:"취소"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"keyword-text",children:e}),(0,r.jsxs)("div",{className:"keyword-actions",children:[r.jsx("button",{onClick:()=>eO(e),disabled:B,className:"edit-btn","data-clarity-tag":"rss-feed-keyword-edit-button",children:"수정"}),r.jsx("button",{onClick:()=>eU(e),disabled:B,className:"delete-btn","data-clarity-tag":"rss-feed-keyword-delete-button",children:"삭제"})]})]})},t))})]})]}),ec&&(0,r.jsxs)("div",{className:"feed-manager-section",children:[(0,r.jsxs)("div",{className:"feed-manager-header",children:[r.jsx("h3",{children:"RSS 피드 관리"}),r.jsx("button",{onClick:()=>eu(!1),className:"close-btn","data-clarity-tag":"rss-feed-feed-manager-close",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"info-box",children:[r.jsx("strong",{children:"설명:"})," RSS 피드를 추가, 수정, 삭제할 수 있습니다. 경쟁사 피드는 키워드 필터 없이 모든 글을 수집하고, 비경쟁사 피드는 키워드가 포함된 글만 수집합니다."]}),ef&&r.jsx("div",{className:"error-message",children:ef}),eb&&r.jsx("div",{className:"success-message",children:eb}),(0,r.jsxs)("div",{className:"add-feed-section",children:[r.jsx("h4",{children:"새 RSS 피드 추가"}),(0,r.jsxs)("div",{className:"feed-input-group",children:[(0,r.jsxs)("div",{className:"feed-input-row",children:[r.jsx("input",{type:"text",value:ep.name,onChange:e=>eg({...ep,name:e.target.value}),placeholder:"피드 이름",disabled:eo}),r.jsx("input",{type:"text",value:ep.url,onChange:e=>eg({...ep,url:e.target.value}),placeholder:"RSS URL",disabled:eo})]}),(0,r.jsxs)("div",{className:"feed-input-row",children:[(0,r.jsxs)("select",{value:ep.type,onChange:e=>eg({...ep,type:e.target.value}),disabled:eo,children:[r.jsx("option",{value:"competitor",children:"경쟁사"}),r.jsx("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,r.jsxs)("select",{value:ep.status,onChange:e=>eg({...ep,status:e.target.value}),disabled:eo,children:[r.jsx("option",{value:"active",children:"활성"}),r.jsx("option",{value:"error",children:"에러"})]}),r.jsx("button",{onClick:eF,disabled:eo||!ep.name.trim()||!ep.url.trim(),className:"add-btn","data-clarity-tag":"rss-feed-feed-add-button",children:eo?"추가 중...":"추가"})]})]})]}),(0,r.jsxs)("div",{className:"feed-list-section",children:[(0,r.jsxs)("h4",{children:["현재 RSS 피드 목록 (",en.length,"개)"]}),eo&&0===en.length?r.jsx("div",{className:"loading-message",children:"RSS 피드를 불러오는 중..."}):0===en.length?r.jsx("div",{className:"empty-message",children:"등록된 RSS 피드가 없습니다."}):r.jsx("div",{className:"feed-grid",children:en.map((e,t)=>r.jsx("div",{className:"feed-item",children:eh?.name===e.name?(0,r.jsxs)("div",{className:"feed-edit-group",children:[(0,r.jsxs)("div",{className:"feed-edit-row",children:[r.jsx("input",{type:"text",value:ex.name,onChange:e=>ey({...ex,name:e.target.value}),placeholder:"이름"}),r.jsx("input",{type:"text",value:ex.url,onChange:e=>ey({...ex,url:e.target.value}),placeholder:"URL"})]}),(0,r.jsxs)("div",{className:"feed-edit-row",children:[(0,r.jsxs)("select",{value:ex.type,onChange:e=>ey({...ex,type:e.target.value}),children:[r.jsx("option",{value:"competitor",children:"경쟁사"}),r.jsx("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,r.jsxs)("select",{value:ex.status,onChange:e=>ey({...ex,status:e.target.value}),children:[r.jsx("option",{value:"active",children:"활성"}),r.jsx("option",{value:"error",children:"에러"})]}),r.jsx("button",{onClick:eJ,disabled:eo,className:"save-btn",children:"저장"}),r.jsx("button",{onClick:()=>{em(null),ey({name:"",url:"",type:"noncompetitor",status:"active"})},disabled:eo,className:"cancel-btn",children:"취소"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"feed-info",children:[r.jsx("div",{className:"feed-name",children:e.name}),r.jsx("div",{className:"feed-url",children:e.url}),(0,r.jsxs)("div",{className:"feed-tags",children:[r.jsx("span",{className:`feed-type-tag ${e.type}`,children:"competitor"===e.type?"경쟁":"비경쟁"}),r.jsx("span",{className:`feed-status-tag ${e.status}`,children:"active"===e.status?"활성":"에러"})]})]}),(0,r.jsxs)("div",{className:"feed-actions",children:[r.jsx("button",{onClick:()=>eI(e),disabled:eo,className:"edit-btn","data-clarity-tag":"rss-feed-feed-edit-button",children:"수정"}),r.jsx("button",{onClick:()=>eM(e),disabled:eo,className:"delete-btn","data-clarity-tag":"rss-feed-feed-delete-button",children:"삭제"})]})]})},t))})]})]}),n&&r.jsx("div",{className:"loading",children:r.jsx("p",{children:"RSS 데이터를 불러오는 중..."})}),p&&r.jsx("div",{className:"error",children:(0,r.jsxs)("p",{children:["오류: ",p]})}),!n&&!p&&(0,r.jsxs)("div",{className:"rss-content",children:[(0,r.jsxs)("div",{className:"stats",children:[(0,r.jsxs)("p",{children:["all"!==_&&r.jsx(r.Fragment,{children:"competitor"===_?"경쟁사에서 ":"비경쟁사에서 "}),$?`"${$}"로 검색한 결과 총 ${ev??v}개의 RSS 아이템`:`총 ${ev??v}개의 RSS 아이템`,"(페이지 ",f," / ",eN,")"]}),$&&(0,r.jsxs)("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",padding:"8px 12px",marginTop:"8px",fontSize:"13px",color:"#0369a1"},children:["\uD83D\uDD0D 검색어: ",(0,r.jsxs)("strong",{children:['"',$,'"']}),r.jsx("button",{onClick:()=>{A(""),eD(h,1,b,_,"")},style:{background:"none",border:"none",color:"#0369a1",textDecoration:"underline",cursor:"pointer",marginLeft:"8px"},children:"검색 초기화"})]}),(0,r.jsxs)("select",{value:b,onChange:e=>eR(Number(e.target.value)),className:"page-size-select","data-clarity-tag":"rss-feed-page-size-select",children:[r.jsx("option",{value:12,children:"12개씩 보기"}),r.jsx("option",{value:24,children:"24개씩 보기"}),r.jsx("option",{value:36,children:"36개씩 보기"})]}),r.jsx("button",{type:"button",onClick:()=>{H(e=>"list"===e?"card":"list")},className:"view-mode-toggle",style:{background:"card"===z?"#3b82f6":"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",marginLeft:"12px",fontWeight:"500"},"data-clarity-tag":"rss-feed-view-mode-toggle",children:"card"===z?"\uD83D\uDCCB 목록으로 보기":"\uD83C\uDCCF 카드로 보기"}),r.jsx("button",{type:"button",onClick:()=>t.push("/blog/write"),className:"write-article-button",style:{background:"#10b981",border:"1px solid #059669",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",marginLeft:"12px",fontWeight:"500",color:"white"},"data-clarity-tag":"rss-feed-write-article",children:"✍️ 글작성"})]}),e&&(0,r.jsxs)("div",{className:"info-banner",style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"12px 16px",margin:"16px 0",fontSize:"14px"},children:[r.jsx("strong",{children:"\uD83D\uDCC5 RSS 수집 정보:"})," 매일 오전 6시(한국시간)에 ",r.jsx("strong",{children:"전일 작성된 글"}),"을 자동 수집합니다. 작성일은 ",r.jsx("strong",{children:"GMT(원본 시간) / KST(한국시간)"})," 순으로 표시됩니다."]}),r.jsx("div",{className:`rss-grid ${"card"===z?"rss-grid-card":"rss-grid-list"}`,children:s.map((t,s)=>{let l=C[t.guid]||t.matchedKeywords||[],n=Array.isArray(l)?l:[],i=(ev||v)-(f-1)*b-s,o="Logbase"===t.blogName,d=o?`/blog/${t.guid}`:t.link;return(0,r.jsxs)("article",{className:`rss-item ${"card"===z?"rss-item-card":"rss-item-list"}`,children:[(0,r.jsxs)("div",{className:"rss-meta",children:[(0,r.jsxs)("span",{className:"item-number",children:["#",i]}),r.jsx("span",{className:"blog-name",children:t.blogName}),r.jsx("span",{className:`feed-type ${t.feedType}`,children:"competitor"===t.feedType?"competitor":"noncompetitor"===t.feedType?"noncompetitor":"Logbase"}),(0,r.jsxs)("span",{className:"date",children:[t.author?`${t.author} / `:"",eL(t.isoDate)]})]}),r.jsx("h3",{className:"rss-title",children:r.jsx("a",{href:d,target:o?"_self":"_blank",rel:"noopener noreferrer","data-clarity-tag":"rss-feed-article-link",children:t.title})}),r.jsx("p",{className:"rss-description",children:r.jsx("a",{href:d,target:o?"_self":"_blank",rel:"noopener noreferrer","data-clarity-tag":"rss-feed-article-link-desc",children:t.description?(0,r.jsxs)(r.Fragment,{children:[t.description.replace(/<[^>]*>/g,"").slice(0,200),t.description.replace(/<[^>]*>/g,"").length>200&&"..."]}):"설명이 없습니다."})}),e&&n.length>0&&(0,r.jsxs)("div",{className:"keywords",children:[r.jsx("strong",{children:"키워드:"})," ",n.map((e,s)=>(0,r.jsxs)("span",{className:"keyword-tag",children:[e,r.jsx("button",{type:"button",onClick:()=>eP(t.guid,e),className:"keyword-delete-btn",disabled:!!T[t.guid],"aria-label":`키워드 ${e} 삭제`,"data-clarity-tag":"rss-feed-keyword-delete-item",children:"\xd7"})]},e))]}),e&&(0,r.jsxs)("div",{className:`keyword-input-row ${"card"===z?"keyword-input-card":""}`,children:[r.jsx("input",{type:"text",value:N[t.guid]||"",onChange:e=>k(s=>({...s,[t.guid]:e.target.value})),placeholder:"키워드 입력 (쉼표로 구분)",disabled:!!T[t.guid]}),r.jsx("button",{type:"button",onClick:()=>eE(t.guid),className:"add-keyword-btn",disabled:!!T[t.guid],"data-clarity-tag":"rss-feed-keyword-add-item",children:T[t.guid]?"저장중...":"추가"}),r.jsx("button",{type:"button",onClick:()=>e$(t.guid),className:"delete-item-btn",disabled:!!E[t.guid],"data-clarity-tag":"rss-feed-article-delete",children:E[t.guid]?"삭제중...":"글삭제"})]}),e&&(0,r.jsxs)("div",{className:`newsletter-date-row ${"card"===z?"newsletter-date-card":""}`,children:[r.jsx("label",{htmlFor:`newsletter-date-${t.guid}`,children:"뉴스레터 발송일:"}),r.jsx("input",{type:"date",id:`newsletter-date-${t.guid}`,value:q[t.guid]||t.news_letter_sent_date||"",onChange:e=>U(s=>({...s,[t.guid]:e.target.value}))}),r.jsx("button",{type:"button",onClick:async()=>{if(q[t.guid]){I(e=>({...e,[t.guid]:!0}));try{let e=await fetch("/api/rss-migrate/newsletter-date",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:t.guid,news_letter_sent_date:q[t.guid]})}),s=await e.json();s.success?(a(e=>e.map(e=>e.guid===t.guid?{...e,news_letter_sent_date:q[t.guid]}:e)),alert("뉴스레터 발송일이 저장되었습니다.")):alert("뉴스레터 발송일 저장 실패: "+(s.error||s.message))}catch(e){alert("뉴스레터 발송일 저장 중 오류 발생")}finally{I(e=>({...e,[t.guid]:!1}))}}},className:"save-newsletter-btn",disabled:!q[t.guid]||!!F[t.guid],"data-clarity-tag":"rss-feed-newsletter-date-save",children:F[t.guid]?"저장중...":"저장"})]})]},`${t.guid}-${s}`)})}),(0,r.jsxs)("div",{className:"pagination",children:[r.jsx("button",{onClick:()=>eT(f-1),disabled:1===f,"data-clarity-tag":"rss-feed-pagination-prev",children:"이전"}),(()=>{let e=[],t=f>3,s=f<eN-2;1===f?e.push(r.jsx("button",{className:"active-page",disabled:!0,children:1},1)):e.push(r.jsx("button",{onClick:()=>eT(1),"data-clarity-tag":"rss-feed-pagination-first",children:1},1)),t&&e.push(r.jsx("span",{children:"..."},"left-ellipsis"));let a=Math.max(f-2,2),l=Math.min(f+2,eN-1);for(let t=a;t<=l;t++)1!==t&&t!==eN&&(t===f?e.push(r.jsx("button",{className:"active-page",disabled:!0,children:t},t)):e.push(r.jsx("button",{onClick:()=>eT(t),"data-clarity-tag":`rss-feed-pagination-page-${t}`,children:t},t)));return s&&e.push(r.jsx("span",{children:"..."},"right-ellipsis")),1!==eN&&(eN===f?e.push(r.jsx("button",{className:"active-page",disabled:!0,children:eN},eN)):e.push(r.jsx("button",{onClick:()=>eT(eN),"data-clarity-tag":"rss-feed-pagination-last",children:eN},eN))),e})(),r.jsx("button",{onClick:()=>eT(f+1),disabled:f===eN,"data-clarity-tag":"rss-feed-pagination-next",children:"다음"})]})]})]})]})}c=(u.then?(await u)():u)[0],a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},3745:e=>{e.exports=import("firebase/app")},401:e=>{e.exports=import("firebase/auth")},1492:e=>{e.exports=import("firebase/firestore")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[117,1664,6859,8342,3893],()=>s(6578));module.exports=a})();