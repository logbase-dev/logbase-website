(()=>{var e={};e.id=7579,e.ids=[7579,2888,660],e.modules={5425:e=>{e.exports={container:"_guid__container__5t7xZ",article:"_guid__article__nHKoF",header:"_guid__header__HucbQ",title:"_guid__title__MaAFx",meta:"_guid__meta__Le9Dq",author:"_guid__author__RaClL",separator:"_guid__separator__b6V55",date:"_guid__date__X77kr",tags:"_guid__tags__BQ28M",tag:"_guid__tag__QuyZl",content:"_guid__content__8Xm7G",actions:"_guid__actions__5te2R",backButton:"_guid__backButton__g0LFV"}},7266:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>g,getServerSideProps:()=>m,getStaticPaths:()=>u,getStaticProps:()=>p,reportWebVitals:()=>h,routeModule:()=>S,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>_});var a=r(7093),i=r(5244),o=r(1323),l=r(1070),n=r(3893),c=r(7039),d=e([n,c]);[n,c]=d.then?(await d)():d;let g=(0,o.l)(c,"default"),p=(0,o.l)(c,"getStaticProps"),u=(0,o.l)(c,"getStaticPaths"),m=(0,o.l)(c,"getServerSideProps"),x=(0,o.l)(c,"config"),h=(0,o.l)(c,"reportWebVitals"),_=(0,o.l)(c,"unstable_getStaticProps"),b=(0,o.l)(c,"unstable_getStaticPaths"),f=(0,o.l)(c,"unstable_getStaticParams"),j=(0,o.l)(c,"unstable_getServerProps"),y=(0,o.l)(c,"unstable_getServerSideProps"),S=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/blog/[guid]",pathname:"/blog/[guid]",bundlePath:"",filename:""},components:{App:n.default,Document:l.default},userland:c});s()}catch(e){s(e)}})},4611:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});let s="Logbase"},9022:(e,t,r)=>{"use strict";r.d(t,{iW:()=>i});let s=require("firebase-admin");var a=r.n(s);!function(){if(a().apps.length>0)return a().app();let e={projectId:process.env.FIREBASE_ADMIN_PROJECT_ID,privateKey:process.env.FIREBASE_ADMIN_PRIVATE_KEY?.replace(/\\n/g,"\n"),clientEmail:process.env.FIREBASE_ADMIN_CLIENT_EMAIL},t=process.env.FIREBASE_STORAGE_EMULATOR_HOST?"logbase-blog-83db6.appspot.com":"logbase-blog-83db6.firebasestorage.app";e.privateKey?a().initializeApp({credential:a().credential.cert(e),storageBucket:t}):(console.warn("Firebase Admin private key is not set. Using default credentials."),a().initializeApp({projectId:process.env.FIREBASE_ADMIN_PROJECT_ID||"logbase-blog-83db6",storageBucket:t}))}();let i=a().firestore();a().storage().bucket();let o=process.env.FIRESTORE_EMULATOR_HOST,l=process.env.FIREBASE_STORAGE_EMULATOR_HOST;o&&(console.log(`✅ [Admin SDK] Firestore Emulator 연결: ${o}`),console.log("   환경 변수를 통해 자동 연결되었습니다.")),l&&(console.log(`✅ [Admin SDK] Storage Emulator 설정: ${l}`),console.log("   환경 변수를 통해 자동 연결되었습니다."))},1070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(997),a=r(6859);function i(){return(0,s.jsxs)(a.Html,{lang:"en",children:[(0,s.jsxs)(a.Head,{children:[s.jsx("link",{rel:"icon",href:"/images/favicon.svg"}),s.jsx("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:`
              (function(c,l,a,r,i,t,y){
                  c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                  t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                  y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
              })(window, document, "clarity", "script", "t25pdtaagd");
            `}})]}),(0,s.jsxs)("body",{children:[s.jsx(a.Main,{}),s.jsx(a.NextScript,{})]})]})}},7039:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>f,getServerSideProps:()=>b});var a=r(997),i=r(1163),o=r(968),l=r.n(o),n=r(9022),c=r(3135),d=r(6809),g=r(4611),p=r(6317),u=r(1664),m=r.n(u),x=r(5425),h=r.n(x),_=e([c,d,p]);[c,d,p]=_.then?(await _)():_;let b=async e=>{let{guid:t}=e.params;try{console.log(`[Blog Detail] GUID 검색 시작: ${t}`),console.log(`[Blog Detail] API 호출로 이미지 URL 처리`);let r=e.req.headers["x-forwarded-proto"]||"http",s=e.req.headers.host,a=`${r}://${s}/api/blog/${t}`;console.log(`[Blog Detail] API 호출: ${a}`);let i=await fetch(a),o=await i.json();if(o.success)return console.log(`[Blog Detail] API 응답 성공:`,{title:o.data.title,blogName:o.data.blogName,guid:o.data.guid}),{props:{item:o.data}};return console.log(`[Blog Detail] API 응답 실패:`,o.error),{props:{item:null,error:o.error||"게시물을 찾을 수 없습니다."}}}catch(a){console.error(`[Blog Detail] API 호출 오류:`,a);let e=null,r=null;try{r=n.iW.collection("rss_items").doc(t),e=await r.get(),console.log(`[Blog Detail] 직접 doc() 호출 결과: ${e.exists?"존재함":"존재하지 않음"}`)}catch(e){console.log(`[Blog Detail] 직접 doc() 호출 실패:`,e)}if(!e||!e.exists){console.log(`[Blog Detail] where 쿼리로 재시도`);try{let r=await n.iW.collection("rss_items").where("guid","==",t).limit(1).get();r.empty?console.log(`[Blog Detail] where 쿼리로도 문서를 찾을 수 없음`):(e=r.docs[0],console.log(`[Blog Detail] where 쿼리로 문서 발견: ${e.id}`))}catch(e){console.log(`[Blog Detail] where 쿼리 실패:`,e)}}if(!e||!e.exists){console.log(`[Blog Detail] 자체 작성 블로그 검색 시도 (logbase- 접두사)`);try{let r=await n.iW.collection("rss_items").where("guid","==",t).where("blogName","==","Logbase").limit(1).get();r.empty||(e=r.docs[0],console.log(`[Blog Detail] 자체 작성 블로그 발견: ${e.id}`))}catch(e){console.log(`[Blog Detail] 자체 작성 블로그 검색 실패:`,e)}}if(!e||!e.exists)return console.log(`[Blog Detail] 모든 방법으로 검색했지만 문서를 찾을 수 없음`),{notFound:!0};let s=e.data();if(!s)return console.log(`[Blog Detail] 문서 데이터가 없음`),{notFound:!0};return console.log(`[Blog Detail] 문서 데이터 로드 성공:`,{title:s.title,blogName:s.blogName,guid:s.guid}),{props:{item:JSON.parse(JSON.stringify({...s,id:e.id,createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():s.createdAt||null,updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():s.updatedAt||null}))}}}},f=({item:e,error:t})=>{let r;let s=(0,i.useRouter)(),{user:o}=(0,p.a)();return s.isFallback?a.jsx("div",{children:"Loading..."}):t||!e?a.jsx("div",{className:"rss-feed-container",children:(0,a.jsxs)("div",{className:"rss-header",children:[a.jsx("h1",{children:"오류"}),a.jsx("p",{children:t||"게시물을 찾을 수 없습니다."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[a.jsx("title",{children:`${e.title} - ${g.j}`}),a.jsx("meta",{name:"description",content:e.description}),a.jsx("meta",{property:"og:title",content:e.title}),a.jsx("meta",{property:"og:description",content:e.description}),a.jsx("meta",{property:"og:type",content:"article"})]}),(0,a.jsxs)("div",{className:h().container,children:[(0,a.jsxs)("article",{className:h().article,children:[(0,a.jsxs)("header",{className:h().header,children:[a.jsx("h1",{className:h().title,children:e.title}),(0,a.jsxs)("div",{className:h().meta,children:[a.jsx("span",{className:h().author,children:e.author||"Logbase"}),a.jsx("span",{className:h().separator,children:"\xb7"}),a.jsx("time",{dateTime:e.isoDate,className:h().date,children:(r=e.isoDate)?new Date(r).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):""})]}),e.categories&&e.categories.length>0&&a.jsx("div",{className:h().tags,children:e.categories.map(e=>(0,a.jsxs)("span",{className:h().tag,children:["#",e]},e))})]}),a.jsx("div",{className:h().content,children:a.jsx("div",{className:h().markdownContent,children:e.content&&a.jsx(c.default,{remarkPlugins:[d.default],components:{img:({src:e,alt:t,...r})=>e&&e.startsWith("data:image/")?a.jsx("img",{src:e,alt:t||"",style:{maxWidth:"100%",height:"auto",borderRadius:"8px",margin:"16px 0"},...r}):a.jsx("img",{src:e,alt:t||"",style:{maxWidth:"100%",height:"auto",borderRadius:"8px",margin:"16px 0"},onError:r=>{console.error("이미지 로드 실패:",e);let s=r.target;s.style.display="none";let a=document.createElement("div");a.style.cssText=`
                              padding: 20px;
                              background: #f5f5f5;
                              border: 1px dashed #ccc;
                              border-radius: 8px;
                              text-align: center;
                              color: #666;
                              margin: 16px 0;
                            `,a.textContent=`이미지를 불러올 수 없습니다: ${t||"이미지"}`,s.parentNode?.insertBefore(a,s)},...r}),p:({children:e,...t})=>a.jsx("p",{style:{marginBottom:"16px",lineHeight:"1.6"},...t,children:e}),h1:({children:e,...t})=>a.jsx("h1",{style:{fontSize:"2rem",marginBottom:"20px",marginTop:"32px"},...t,children:e}),h2:({children:e,...t})=>a.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"16px",marginTop:"24px"},...t,children:e}),h3:({children:e,...t})=>a.jsx("h3",{style:{fontSize:"1.25rem",marginBottom:"12px",marginTop:"20px"},...t,children:e}),blockquote:({children:e,...t})=>a.jsx("blockquote",{style:{borderLeft:"4px solid #e5e7eb",paddingLeft:"16px",margin:"16px 0",fontStyle:"italic",color:"#6b7280"},...t,children:e}),ul:({children:e,...t})=>a.jsx("ul",{style:{marginBottom:"16px",paddingLeft:"20px"},...t,children:e}),ol:({children:e,...t})=>a.jsx("ol",{style:{marginBottom:"16px",paddingLeft:"20px"},...t,children:e}),li:({children:e,...t})=>a.jsx("li",{style:{marginBottom:"8px"},...t,children:e}),code:({children:e,...t})=>a.jsx("code",{style:{backgroundColor:"#f3f4f6",padding:"2px 6px",borderRadius:"4px",fontFamily:"monospace",fontSize:"0.9em"},...t,children:e}),pre:({children:e,...t})=>a.jsx("pre",{style:{backgroundColor:"#f3f4f6",padding:"16px",borderRadius:"8px",overflow:"auto",marginBottom:"16px"},...t,children:e})},children:(e=>{if(!e)return"";let t=e.replace(/<br\s*\/?>/gi,"\n\n");return t=(t=t.replace(/<(?!img)[^>]*>/gi,"")).replace(/\n{3,}/g,"\n\n")})(e.content)})})})]}),(0,a.jsxs)("div",{className:h().actions,children:[a.jsx(m(),{href:"/rss-feed",className:h().backButton,children:"← 목록으로 돌아가기"})," \xa0\xa0\xa0\xa0",o&&e&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(m(),{href:`/blog/edit/${e.guid}`,className:h().backButton,children:"✏️ 수정하기"})," \xa0\xa0\xa0\xa0",a.jsx("button",{onClick:async()=>{if(confirm("정말로 이 글을 삭제하시겠습니까?"))try{let t=await fetch("/api/rss-migrate/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:e.guid})}),r=await t.json();r.success?(alert("글이 삭제되었습니다."),s.push("/rss-feed")):alert("글 삭제에 실패했습니다: "+r.message)}catch(e){console.error("글 삭제 오류:",e),alert("글 삭제 중 오류가 발생했습니다.")}},className:h().backButton,style:{background:"#dc2626",color:"white",border:"none",cursor:"pointer"},children:"\uD83D\uDDD1️ 삭제하기"})]})]})]})]})};s()}catch(e){s(e)}})},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},3745:e=>{"use strict";e.exports=import("firebase/app")},401:e=>{"use strict";e.exports=import("firebase/auth")},1492:e=>{"use strict";e.exports=import("firebase/firestore")},3135:e=>{"use strict";e.exports=import("react-markdown")},6809:e=>{"use strict";e.exports=import("remark-gfm")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[117,1664,6859,8342,3893],()=>r(7266));module.exports=s})();