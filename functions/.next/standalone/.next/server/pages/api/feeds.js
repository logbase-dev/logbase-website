"use strict";(()=>{var e={};e.id=527,e.ids=[527],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},629:e=>{e.exports=require("fs/promises")},5315:e=>{e.exports=require("path")},3745:e=>{e.exports=import("firebase/app")},401:e=>{e.exports=import("firebase/auth")},1492:e=>{e.exports=import("firebase/firestore")},3392:e=>{e.exports=import("firebase/storage")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2991:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>l,default:()=>u,routeModule:()=>d});var o=r(1802),a=r(7153),n=r(6249),i=r(4149),c=e([i]);i=(c.then?(await c)():c)[0];let u=(0,n.l)(i,"default"),l=(0,n.l)(i,"config"),d=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/feeds",pathname:"/api/feeds",bundlePath:"",filename:""},userland:i});s()}catch(e){s(e)}})},4810:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{I:()=>d,db:()=>l,l:()=>u});var o=r(3745),a=r(1492),n=r(401),i=e([o,a,n]);[o,a,n]=i.then?(await i)():i;let c={apiKey:"AIzaSyA6kCmSqaBH5SUPb4PkHU1hwe0l5Ppqw2w",authDomain:"logbase-blog-83db6.firebaseapp.com",projectId:"logbase-blog-83db6",storageBucket:"logbase-blog-83db6.firebasestorage.app",messagingSenderId:"938632982963",appId:"1:938632982963:web:6159f776e4466bf74bdbc6"};if(!c.apiKey||!c.projectId)throw Error("Firebase 설정이 올바르지 않습니다. .env.local 파일에 NEXT_PUBLIC_FIREBASE_ 환경 변수를 확인해주세요.");let u=0===(0,o.getApps)().length?(0,o.initializeApp)(c):(0,o.getApps)()[0],l=(0,a.getFirestore)(u),d=(0,n.getAuth)(u);s()}catch(e){s(e)}})},5731:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{cx:()=>c,y7:()=>u});var o=r(3392),a=r(4810),n=e([o,a]);[o,a]=n.then?(await n)():n;let i=(0,o.getStorage)(a.l),c=async e=>{try{let t=(0,o.ref)(i,e),r=await (0,o.getDownloadURL)(t),s=await fetch(r);if(!s.ok)throw Error(`Failed to download file from storage: ${s.statusText}`);let a=await s.json();return console.log(`[Storage] ✅ Successfully read and parsed ${e}`),a}catch(t){if("storage/object-not-found"===t.code)return console.warn(`[Storage] ⚠️ File not found at ${e}, returning empty array.`),[];throw console.error(`[Storage] ❌ Error reading JSON from ${e}:`,t),t}},u=async(e,t)=>{try{let r=(0,o.ref)(i,e),s=JSON.stringify(t,null,2);await (0,o.uploadString)(r,s,"raw",{contentType:"application/json"}),console.log(`[Storage] ✅ Successfully wrote to ${e}`)}catch(t){throw console.error(`[Storage] ❌ Error writing JSON to ${e}:`,t),t}};s()}catch(e){s(e)}})},4149:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>l}),r(629);var o=r(5315),a=r.n(o),n=r(5731),i=e([n]);n=(i.then?(await i)():i)[0],a().join(process.cwd(),"public","feeds.json");let d="feeds/feeds.json";async function c(){return console.log("[API/feeds] Production: Reading from Firebase Storage."),(0,n.cx)(d)}async function u(e){console.log("[API/feeds] Production: Writing to Firebase Storage."),await (0,n.y7)(d,e)}async function l(e,t){if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),t.setHeader("Access-Control-Allow-Headers","Content-Type"),"OPTIONS"===e.method)return t.status(200).end();try{switch(e.method){case"GET":{let e=await c();return t.status(200).json({success:!0,feeds:e})}case"POST":{let{name:r,url:s,type:o,status:a}=e.body;if(!r||!s)return t.status(400).json({success:!1,error:"피드 이름과 URL은 필수입니다."});let n=await c();if(n.some(e=>e.name===r))return t.status(400).json({success:!1,error:"이미 존재하는 피드 이름입니다."});let i=[...n,{name:r,url:s,type:o,status:a}];return await u(i),t.status(200).json({success:!0,message:"RSS 피드가 추가되었습니다.",feeds:i})}case"PUT":{let{oldName:r,name:s,url:o,type:a,status:n}=e.body;if(!r||!s||!o)return t.status(400).json({success:!1,error:"모든 필드를 입력해주세요."});let i=await c(),l=i.findIndex(e=>e.name===r);if(-1===l)return t.status(404).json({success:!1,error:"수정할 피드를 찾을 수 없습니다."});return i[l]={name:s,url:o,type:a,status:n},await u(i),t.status(200).json({success:!0,message:"RSS 피드가 수정되었습니다.",feeds:i})}case"DELETE":{let{name:r}=e.body;if(!r)return t.status(400).json({success:!1,error:"삭제할 피드 이름이 필요합니다."});let s=await c(),o=s.filter(e=>e.name!==r);if(s.length===o.length)return t.status(404).json({success:!1,error:"삭제할 피드를 찾을 수 없습니다."});return await u(o),t.status(200).json({success:!0,message:"RSS 피드가 삭제되었습니다.",feeds:o})}default:return t.setHeader("Allow",["GET","POST","PUT","DELETE"]),t.status(405).end(`Method ${e.method} Not Allowed`)}}catch(r){return console.error(`[API/feeds] Error on ${e.method}:`,r),t.status(500).json({success:!1,error:r.message||"서버 오류가 발생했습니다."})}}s()}catch(e){s(e)}})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=2991);module.exports=r})();