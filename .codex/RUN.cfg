# 실행/빌드/테스트 표준 설정 (Next.js/Node)
[env]
language = "node"
node_version = "20"            # 18/20 중 프로젝트에 맞게
package_manager = "npm"       # npm/yarn/pnpm 중 선택
internet_access = true         # 외부 패키지 설치/Fetch 필요하면 true

[setup]
install = [
  "npm install"               # npm 사용
]

[build]
commands = [
  "npm run lint --silent || true",
  "npm run build:standalone"  # Firebase Functions용 standalone 빌드
]
artifacts = [".next", "out", "coverage", "storybook-static", "functions/.next"]

[test]
# 테스트 없으면 비워둬도 됨
commands = [
  "npm run test -- --reporter=dot || npm run test || true"
]
timeout_seconds = 1800

[lint]
commands = ["npm run lint"]

[typecheck]
commands = ["npx tsc --noEmit"]

[conventions]
# 커밋/PR 메시지 규칙
commit_prefix = "logbase:"
require_conventional_commits = true

[limits]
# Codex가 변경할 수 있는 경로 범위(화이트리스트)
allow_paths = [
  "src/**", "app/**", "pages/**", "components/**", "styles/**",
  "lib/**", "hooks/**", "utils/**",
  "tests/**", "__tests__/**",
  "public/**",
  "next.config.*", "tsconfig*.json", ".eslint*", ".prettier*",
  "functions/**"
]
# 건드리면 안 되는 파일/경로(블랙리스트)
deny_paths = [
  "scripts/deploy/**",
  ".github/workflows/**",
  ".env*", "env/**",
  "infra/**", "terraform/**",
  "apps/**/secrets/**",
  "firebase.json",
  "firestore.rules",
  "firestore.indexes.json"
]

[review]
# PR에 자동으로 붙일 체크리스트 텍스트 파일 경로(아래 POLICY.md 참고)
policy_readme = ".codex/POLICY.md"
require_change_summary = true
